export default((h=Symbol("context"),O=null,r=[],c={bubble:"bubble",self:"self",mutation:"mutation"},d=/^[_a-z]{1}[\w]*$/,B=/^(http:\/\/|https:\/\/|\/|\.\/|\.\.\/)/i,w=null,j=null,u=null,F=[],S=e=>Array.isArray(e)?e:[e],C=()=>Object.create(null),l=C(),p=new Set,m=((n=new Set,l=new Set,o=(e,t,s,i=0)=>{var r=s[i++];if(r){var n=r.$eventListenerMap&&r.$eventListenerMap[e.type],n=n?[...n].filter(e=>Object.is(e.decorators.capture,t)):[];if(!n.length)return o(e,t,s,i);Object.defineProperty(e,"currentTarget",{configurable:!0,value:r});for(const{decorators:l,handler:o}of n)if(o(e),l.stopImmediate)return e.stopImmediatePropagation();e.cancelBubble||o(e,t,s,i)}})=>(e,t,s,i)=>{t.$eventListenerMap||(t.$eventListenerMap=C());var r=t.$eventListenerMap[e]||new Set;s instanceof Function&&(s={decorators:{capture:i},handler:s}),T.call(r,s),t.$eventListenerMap[e]=r,i&&l.has(e)||!i&&n.has(e)||((i?l:n).add(e),window.addEventListener(e,e=>o(e,i,i?e.composedPath().reverse():e.composedPath(),0),i))})(),x=(t,s)=>{if(t){var i=t.length||0;for(let e=0;e<i;++e)s(t[e],e)}},t=(...e)=>{const t=C();return x(e,e=>t[e]=!0),t},$=Symbol("meta"),v={json:"json",namespace:"namespace",script:"script",style:"style",string:"string",view:"view"},E=Promise.resolve(),N=null,k=new Set,M=document.createTextNode(""),z=((n={options:{rootSelectors:["title","body"]},modules:{view:{uri:["template#view"],type:v.view},script:{uri:['script[type="dagger/script"]'],type:v.script,anonymous:!0},style:{uri:['style[type="dagger/style"]'],type:v.style,scoped:!0}},routers:{mode:"hash",prefix:"",aliases:{},default:"",routing:null}},l=(e,t,s,i)=>({base:e,content:i?Object.assign({},n[s],t):t}))=>(e,t,s="modules")=>{e=L(e,`script[type="dagger/${s}"]`,!1,!0);if(e){const i=e.getAttribute("src"),r=!Object.is(s,"modules")||e.hasAttribute("extends");return e.hasAttribute("base")&&(t=new URL(e.getAttribute("base")||"",t).href),i?G(new URL(i,t),e.integrity).then(({content:e})=>l(t,g(e),s,r)):l(t,e.textContent.trim()?g(e.textContent):{},s,r)}return{base:t,content:n[s]}})(),g=t=>{if(!Reflect.has(l,t))try{try{l[t]=new Function(`return (${t});`)()}catch(e){l[t]=new Function(`return (() => {${t}})();`)()}}catch(e){}return l[t]},b=(()=>e=>Object.is(typeof e,"string"))(),q=((e=t(...Object.keys(v).map(e=>"@"+e)),r=(e,t)=>{var s=Array.isArray(e);return b(e)||s&&e.every(b)?e={uri:e}:s&&(e={candidates:e}),e.candidates&&(e.candidates=S(e.candidates),s=e.candidates.find(e=>e instanceof Object&&(!Reflect.has(e,"media")||matchMedia(e.media).matches)),Object.assign(e,s)),e.type||(e.type=t),e.uri&&(e.uri=S(e.uri)),e})=>i=>(x(Object.keys(i),s=>e[s]&&i[s]instanceof Object?(x(Object.entries(i[s]),([e,t])=>{i[e]=r(t,s.substring(1))}),Reflect.deleteProperty(i,s)):i[s]=r(i[s])),i))(),f=e=>Reflect.ownKeys(e).filter(e=>!Object.is(e,$)),y=async([e,...t],s={stop:!1})=>{if(!s.stop)return e instanceof Promise?e.then(e=>y([e,...t],s)):e instanceof Function?y([e(null,s),...t],s):t.length?y([t.shift()(e,s),...t],s):e},V=JSON.stringify,T=Set.prototype.add,Y=Set.prototype.clear,A=Set.prototype.delete,J=Map.prototype.clear,K=Map.prototype.set,X=WeakMap.prototype.set,R=()=>{r.length&&(x(g(`[${r.map(e=>e.processor).join(", ")}]`),(e,t)=>{t=r[t];l[t.processor]=e,t.processor=e}),r.length=0)},P=s=>{function e(...e){var t=O,e=(O=null,s.apply(this,e));return O=t,e}return e.prototype=s.prototype,e},L=(e,t,s=!1)=>e[s?"querySelectorAll":"querySelector"](t),G=(e,t="")=>fetch(e,t?{integrity:"sha256-"+t}:{}).then(t=>{if(t.ok)return t.text().then(e=>({content:e,type:t.headers.get("content-type")}))}).catch(()=>{}),U=(e,t,s)=>{var i=document.createElement("style");return e&&(i.textContent=e),document.head.appendChild(i),i.disabled=s,i.setAttribute("name",t),i},H=e=>{var t=document.createElement("template");return t.innerHTML=e,t.content},_=(e,s)=>x(e.children,t=>{Object.is(t.tagName,"TEMPLATE")?(t.getAttribute("$html")&&(t.$tags=s),_(t.content,s)):t instanceof HTMLElement&&x(s,e=>t.setAttribute(e,""))}),D=(e,t=!0)=>{if(!b(e)){if(null==e||Number.isNaN(e))return"";if(e instanceof Object)return V(e);e=String(e)}return t?e.trim():e},I=((r=Object.prototype.hasOwnProperty,n=new Set([...Reflect.ownKeys(Symbol).map(e=>Symbol[e]).filter(e=>Object.is(typeof e,"symbol")),h,$]),l=new WeakMap,o=new Set([void 0,Array,Object]),a={get:(e,t)=>{const s=e[t];if(O&&!n.has(t)&&(Object.is(s)||r.call(e,t))){const i=O.topologySet;x([...e[$]].filter(e=>!e.parent||i.has(e)),e=>e.fetch(t,s).subscribe())}return s},set:(e,t,s)=>{var i;return e[t]=s,!n.has(t)&&r.call(e,t)&&(i=e[$],O&&i.forEach(e=>e.unsubscribe(O)),s=I(e,t),i.forEach(e=>e.fetch(t).update(s,c.self))),!0},deleteProperty:(e,t)=>{var s=Reflect.has(e,t);return!!Reflect.deleteProperty(e,t)&&(s&&b(t)&&e[$].forEach(e=>e.fetch(t).update(void 0,c.self)),!0)}})=>(e,t)=>{var s,i=null==t;let r=i?e:e[t];return(r instanceof Object||r&&!r.constructor)&&((s=l.get(r))?r=s:(r[$]=new Set,o.has(r.constructor)&&(s=new Proxy(r,a),X.call(l,r,s),x(f(r),e=>I(r,e)),r=s),X.call(l,r,r))),i?r[$].add(new ee(null,"",r)):e[t]=r,r})(),Q=((r=new Map,i={json:"dagger/json",namespace:"dagger/modules",script:"dagger/script",style:"dagger/style",string:"dagger/string"},n=C(),l={html:"text/html",json:"application/json",script:["application/javascript","javascript/esm","text/javascript"],style:"text/css"},o=/(?:^|;|\s+)(?:export|import)\s*?(?:(?:(?:[$\w*\s{},]*)\s*from\s*?)|)(?:(?:"([^"]+)?")|(?:'([^']+)?'))[\s]*?(?:$|)/gm,a=((l=/([\s:+>~])/)=>(t,e,s,i)=>{var r,n;e instanceof CSSKeyframesRule&&(r=e.name,e.name=r+"-"+s,t.insertRule(e.cssText,i.index++),e.name=r),(e.cssRules||[]).length?x(e.cssRules,e=>a(t,e,s,i)):e.selectorText&&((n=(r=e.style).animationName)&&(r.animationName=n+"-"+s),t.insertRule(`${e.selectorText.split(",").map(e=>(e=e.trim())&&`${l.test(e)?e.replace(l,`[${s}]$1`):e+`[${s}]`}, [${s}] `+e).join(", ")}{${r.cssText}}`,i.index++),n)&&(r.animationName=n)})(),c=(i,r)=>{try{x(f(i),e=>{var t=i[e],s=t instanceof Function;r[e]=s?P(t):t,t instanceof Object&&!s&&c(t,t)})}catch(e){}finally{return r}},h=class{constructor(e={},t="",s="",i=null){s=s.trim(),this.name=s,this.state="unresolved",this.valid=!0,this.module=this.integrity=this.parent=this.children=this.type=this.content=this.resolvedContent=null,i?(this.parent=i,this.path=i.path?i.path+"."+s:s,this.tags=[...i.tags,this.path.replace(/\./g,"__")],this.baseElement=i.baseElement):(this.path=s,this.tags=["__"],this.baseElement=document);var{integrity:s,uri:r,type:n}=e;n&&(this.type=n),Reflect.has(e,"content")?this.content=e.content:r&&(this.URIs=r),this.integrity=s,this.config=e,this.promise=new Promise(e=>this.resolver=e),this.base=new URL(e.base||t,(i||{}).base||document.baseURI).href,e.prefetch&&this.resolve()}fetch(e){var t;return e.length?(t=e.shift(),this.fetchChild(t).fetch(e)):this}fetchChild(t){return(this.children||[]).find(e=>Object.is(e.name,t)&&e.valid)}fetchViewModule(e){return this.fetchChild(e)||this.parent.fetchChild(e)}resolve(e=null){var t,s=this.type;if(!Object.is(this.state,"unresolved")){if(!e)return this.valid&&Object.is(this.state,"resolved")&&(Object.is(s,v.style)?T.call(p,this.module):Object.is(s,v.namespace)&&x(this.children,e=>e.resolve())),this.promise;this.promise=new Promise(e=>this.resolver=e)}this.state="resolving";let i=null;return i=null==this.content?[...this.URIs.map(s=>(e,t)=>(t.stop=!!e)||this.resolveURI(s)),e=>e||(this.valid=!1,this.resolved(null))]:(t=this.content,[...i=[v.namespace,v.json].includes(s)?[Object.is(s,v.namespace)?this.resolveNamespace(t,this.base,e):t]:[this.resolveContent(t)],e=>this.resolveModule(e),e=>this.resolved(e)]),E.then(()=>y(i)),this.promise}resolveCachedModuleProfile(e){return this.type||(this.type=e.type),e.resolvedContent}resolveContent(e){b(e)||(e=V(e)),this.content=e.trim();var t=this.type;if(Object.is(t,v.namespace))return this.baseElement=H(e),y([z(this.baseElement,this.base),({base:e,content:t})=>this.resolveNamespace(t,e)]);if(Object.is(t,v.script))return import("data:text/javascript, "+encodeURIComponent(e.replace(o,(e,t,s)=>e.replace(t||s,new URL(t||s,this.base)))));if(Object.is(t,v.view)){const s=new W(H(e),this.parent,null,null,!1,{});return Promise.all(s.promises||[]).then(()=>s)}return Object.is(t,v.style)?U(e,this.path+"-template",!0):Object.is(t,v.json)?JSON.parse(e):Object.is(t,v.string)?this.content:void 0}resolved(e){return this.module=e,this.state="resolved",this.resolver(this),this}resolveEmbeddedType(e){if(!this.type){var{tagName:t,type:s}=e;if(Object.is(t,"TEMPLATE"))this.type=v.view;else if(Object.is(t,"STYLE")&&Object.is(s,i.style))this.type=v.style;else if(Object.is(t,"SCRIPT")){if(Object.is(s,i.namespace))return this.type=v.namespace,this.resolveNamespace(g(e.innerHTML),e.getAttribute("base")||this.base);Object.is(s,i.script)?this.type=v.script:Object.is(s,i.json)?this.type=v.json:Object.is(s,i.string)&&(this.type=v.string)}}}resolveModule(e){let t=this.resolvedContent=e;var s=this.type;if(Object.is(s,v.namespace))t=this.module,this.children||(this.children=e),this.config.explicit&&(this.config.anonymous?Object.assign(this.parent.module,t):this.parent.module[this.name]=t),this.parent&&this.parent.resolve().then(e=>Object.setPrototypeOf(t,e.module));else if(Object.is(s,v.view))_(t.node,this.parent.tags);else if(Object.is(s,v.script))t=c(t,C()),Object.is(this.config.anonymous,!1)?this.parent.module[this.name]=t:Object.assign(this.parent.module,t);else if(Object.is(s,v.style)){if(!Object.is(this.config.scoped,!1)){const i=U("",this.path,!0),r=i.sheet,n={index:0},l=this.parent.path?this.parent.path.replace(/\./g,"__"):"__";x(t.sheet.cssRules,e=>a(r,e,l,n)),i.setAttribute("based",this.path+"-template"),t=i}T.call(p,t)}else Object.is(s,v.json)?this.config.anonymous?Object.assign(this.parent.module,t):this.parent.module[this.name]=t:Object.is(s,v.string)&&(this.parent.module[this.name]=t);return t}resolveNamespace(e,s,t=null){return this.parent&&q(e),this.children||(this.children=Object.entries(e).map(([e,t])=>new h(t,s,e,this))),this.module=this.module||C(),Promise.all((t?this.children.filter(e=>t.has(e.name)):this.children).map(e=>e.resolve()))}resolveRemoteType(e,t,s){this.base=s,this.type||(s.endsWith(".js")||s.endsWith(".mjs")||l.script.some(e=>t.includes(e))?this.type=v.script:s.endsWith(".css")||t.includes(l.style)?this.type=v.style:s.endsWith(".html")||t.includes(l.html)?(e=e.trim(),this.type=e.startsWith("<html>")||e.startsWith("<!DOCTYPE ")?v.namespace:v.view):s.endsWith(".json")||t.includes(l.json)?this.type=v.json:this.type=v.string)}resolveURI(t){if(t=t.trim()){let e=null;if(B.test(t)){var s=n[this.integrity];if(s)e=[s.resolve(),e=>this.resolveCachedModuleProfile(e)];else{this.integrity&&(n[this.integrity]=this);const i=new URL(t,this.base).href;e=[(e,t)=>y([G(i,this.integrity),e=>e||(t.stop=!0)]),({content:e,type:t})=>this.resolveRemoteType(e,t,i)||this.resolveContent(e)]}}else e=d.test(t)?[this.parent.fetch(t,!0),e=>this.resolveCachedModuleProfile(e)]:(s=L(this.baseElement,t),t=r.get(s),t?[t.resolve(),e=>this.resolveCachedModuleProfile(e)]:(K.call(r,s,this),[this.resolveEmbeddedType(s)||this.resolveContent(s.innerHTML)]));return e&&y([...e,e=>this.resolveModule(e),e=>this.resolved(e)])}}})=>h)(),Z=((y={checked:e=>Object.is(e.tagName,"OPTION")?e.selected:e.checked,file:e=>(e.multiple?[...e.files]:e.files[0])||null,focus:e=>e.isSameNode(document.activeElement),result:((s=(t,{buffer:e,data:s,encoding:i})=>{let r={file:t,loaded:0,progress:0,state:"initialized",content:null};const n=new FileReader;return n.onloadstart=()=>(r=r&&r[$]&&[...r[$]][0].value||r).state="loading",n.onprogress=({loaded:e})=>(r.loaded=e,r.progress=Math.floor(e/t.size*100)),n.onload=()=>(r.state="loaded",r.content=n.result),n.onerror=()=>r.state="error",n.onabort=()=>r.state="abort",e?n.readAsArrayBuffer(t):s?n.readAsDataURL(t):n.readAsText(t,i||"utf-8"),r})=>(e,t)=>e.multiple?[...e.files].map(e=>s(e,t)):s(e.files[0],t))(),selected:e=>{var{name:t,type:s,tagName:i}=e,i=Object.is(i,"SELECT"),t=[...i?e.selectedOptions:L(document.body,`input[type="${s}"][name="${t}"]:checked`,!0)].map(e=>r(e));return(i?e.multiple:Object.is(s,"checkbox"))?t:t[0]},value:({type:e,value:t,valueAsNumber:s},{number:i,trim:r},{detail:n})=>n?null:["date","datetime-local"].includes(e)?new Date(s||0):["number","range"].includes(e)?s:i?Number.parseFloat(t):r?t.trim():t},l=["draggable"],c=(e,t,s,{name:i})=>t&&(null==e?t.removeAttribute(i):t.setAttribute(i,D(e))),o=((a=new Event("change"))=>{return{$boolean:(e,t,s,{name:i})=>t.toggleAttribute(i,!!e),checked:(t,s,{parentNode:i},{decorators:r})=>{var{tagName:n,type:e}=s,l=Object.is(n,"OPTION"),o=Object.is(e,"checkbox");if(l||Object.is(n,"INPUT")&&(o||Object.is(e,"radio"))){let e=null;if(l){if(Object.is(t,s.selected))return;s.selected=t;n=i;n&&(!n.multiple&&t&&(e=L(n,"option",!0)),n.$changeEvent||(n.$changeEvent=!0,m("change",n,e=>x(L(e.target,"option",!0),e=>e.dispatchEvent(a)))))}else o&&r.indeterminate&&(s.indeterminate=null==t),s.indeterminate||(s.checked=t),o||t&&(e=L(document.body,`input[type="radio"][name="${s.name}"]`,!0));e&&E.then(()=>x(e,e=>e.dispatchEvent(a)))}else c(t,s,0,{name:"checked"})},class:(t,e,{profile:{classNames:s}})=>{if(t){const i=new Set(s);Array.isArray(t)?x(t,e=>T.call(i,D(e))):t instanceof Object?x(Object.keys(t),e=>t[e]&&T.call(i,e.trim())):T.call(i,D(t)),e.setAttribute("class",[...i].join(" ").trim())}else s?e.setAttribute("class",s.join(" ")):e.removeAttribute("class")},each:((v=(t,e,s,i,r,n,l,o,a,c,h,d)=>{let u=null;var p=r.get(s);if(p){if(u=p.shift(),p.length||b.call(r,s),!Object.is(t,u.index)){var{landmark:m,upperBoundary:p}=u,v=[p];let e=p;for(;!Object.is(e,m);)e=e.nextSibling,v.push(e);x(v.reverse(),e=>d.insertBefore(e,(t?i[t-1].landmark||{}:c.upperBoundary).nextSibling)),i.includes(u)&&i.splice(u.index,1),u.index=t,i[t]=u}u.scope[o]=e,u.scope[l]=t}else u=new f(h,c,t,{[l]:t,[o]:e,[a]:s});r=n.get(s);r?r.push(u):K.call(n,s,[u])},b=Map.prototype.delete)=>(e,t,i,{decorators:s})=>{e=e||{};const r=new Set(e.values instanceof Function?e.values():Object.values(e)),n=[...e.entries instanceof Function?e.entries():Object.entries(e)],{children:l,childrenMap:o,profile:a,parentNode:c}=i,h=e[$];if(h&&x(n,([t,s])=>s&&s[$]&&h.forEach(e=>e.fetch(t,s))),!n.length)return J.call(o)||i.removeChildren(!0);o.forEach((e,t)=>r.has(t)||(x(e,e=>e.destructor(!0)),b.call(o,t)));const d=new Map,{item:u="item",key:p="key",index:m="index"}=s;x(n,([e,t],s)=>v(s,e,t,l,o,d,m,p,u,i,a,c)),l.length=n.length,o.forEach(e=>x(e,e=>(e.parent=null,e.destructor(!0)))),i.childrenMap=d})(),exist:(e,t,s)=>e?Object.is(s.state,"unloaded")&&s.loading():s.unloading(!0),file:()=>{},focus:(e,t,s,{decorators:{prevent:i=!1}})=>e?t.focus({preventScroll:i}):t.blur(),html:(e,t,s,{decorators:{root:i=!1,strict:r=!1}})=>{if(e=D(e),s.removeChildren(!0),e){!r&&d.test(e)&&(e=`<${e}></${e}>`);const n=[],l=s.profile,o=H(e);t||(r=l.node.$tags)&&_(o,r),Reflect.construct(W,[o,i?w:l.namespace,n,null,!0]),n.length&&(R(),Promise.all(n.map(e=>Promise.all(e.promises||[]))).then(()=>x(n,(e,t)=>s.profile&&Reflect.construct(f,[e,i?null:s,t,null,(e.landmark||e.node).parentNode])))),t?t.appendChild(o):s.parentNode.insertBefore(o,s.landmark)}},result:()=>{},selected:(o=(e,t,s)=>{const i=r(e);return s?(t||[]).some(e=>Object.is(e,i)):Object.is(t,i)},(t,e)=>{var{type:s,tagName:i}=e,r=Object.is(i,"SELECT");if(r||Object.is(i,"INPUT")&&(Object.is(s,"checkbox")||Object.is(s,"radio"))){const n=r?e.multiple:Object.is(s,"checkbox");r?E.then(()=>x(L(e,"option",!0),e=>e.selected=o(e,t,n))):e.checked=o(e,t,n)}else c(t,e,0,{name:"selected"})}),style:(l=(e,t)=>{var s;t&&([t,s=""]=t.split(":").map(e=>e.trim()),e[t]=s)},(t,e,{profile:{inlineStyle:s,styles:i}})=>{if(t){const r=Object.assign({},i);Array.isArray(t)?x(t,e=>l(r,D(e))):t instanceof Object?x(Object.keys(t),e=>r[e.trim()]=D(t[e])):x(D(t).split(";"),e=>l(r,e.trim())),e.style.cssText=Object.keys(r).filter(e=>r[e]).map(e=>`${e}: ${r[e]}; `).join("").trim()}else s?e.setAttribute("style",s):e.removeAttribute("style")}),text:(e,t)=>{e=D(e),Object.is(e,t.textContent)||(t.textContent=e)},value:(n=(e,t=2)=>String(e).padStart(t,"0"),(t,s,e,{decorators:{trim:i=!1}})=>{e.value=t;var{tagName:e,type:r}=s;if(Object.is(e,"INPUT")){e=["date","datetime-local"].includes(r);if(t instanceof Date)if(e||Object.is(r,"week"))s.valueAsNumber=t;else if(Object.is(r,"month"))s.value=t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1);else if(Object.is(r,"time")){r=s.step||0;let e=n(t.getUTCHours())+":"+n(t.getUTCMinutes());r%60&&(e=e+":"+n(t.getUTCSeconds()),r%1)&&(e=e+"."+n(t.getUTCMilliseconds(),3)),s.value=e}else s.value=t;else t=D(t,i),e?s.valueAsNumber=new Date(t):s.value=t}else s.value=D(t,i)})};var n,l,o})(),g=(()=>(n,e,t)=>!e||(e=S(e))[t](e=>{{var t=n,s=!(e=String(e)).startsWith("!");s||(e=e.substring(1));const i=new RegExp(e),r=t.getModifierState&&t.getModifierState(e)||[t.code,t.key,t.button].some(e=>i.test(e));return s==r}}))(),s=(s,t,i)=>t&&x(t.filter((e,t)=>e&&(e.index=t,e.decorators)&&s.includes(e.decorators.name)).reverse(),e=>i(e)||t.splice(e.index,1)),i=({target:e,event:t,handler:s,options:i,listener:r})=>r?A.call(e.$eventListenerMap[t],r):e.removeEventListener(t,s,i),r=e=>(e&&Reflect.has(e[h]||{},"value")?e[h]:e).value,f=class{constructor(s,e=null,i=0,t=null,r=null){const{directives:n,dynamic:l,namespace:o,node:a,landmark:c,plain:h,text:d,html:u,raw:p}=s;if(this.directives=n,this.profile=s,this.index=i,this.state="loaded",this.parent=this.children=this.childrenMap=this.existController=this.landmark=this.upperBoundary=this.childrenController=this.controller=this.controllers=this.eventHandlers=this.scope=this.sentry=this.node=null,e?(this.parent=e,this.parentNode=r||e.node||e.parentNode,this.scope=e.scope,e.children.splice(i,0,this)):(this.parentNode=a.parentNode||c.parentNode,this.scope=j),this.module=o.module,u)return this.loading();if(p||h)this.resolveNode(),this.node.removeAttribute&&this.node.removeAttribute("dg-cloak"),h&&this.resolveChildren();else if(d)this.resolveNode(()=>this.controller=this.resolveController(d));else{r=(this.directives||{}).each;if((r||s.virtual)&&this.resolveLandmark(t),t){const{plain:h,root:m}=r.decorators;this.sliceScope=this.resolveScope(t,h,m),e.children.length>i+1&&x(e.children,(e,t)=>e&&i<t&&e.index++)}else if(s.slotScope&&(this.slotScope=this.resolveScope(Object.assign({},s.slotScope),!0)),r)return this.children=[],this.childrenMap=new Map,this.controller=this.resolveController(r),this;if(l){const v=l.processor(this.module,this.scope,this.parentNode),n=this.directives;this.directives=Object.assign({},n,{controllers:[...n.controllers||[]],eventHandlers:[...n.eventHandlers||[]]}),x(S(v),e=>{var t;b(e)&&(e=(t=e.indexOf("="))<0?{name:e,value:""}:{name:e.substring(0,t),value:e.substring(t+1)}),s.resolveDirective(e.name.trim(),e.value,this.directives)}),R()}e=(this.directives||{}).exist;e?(this.lanmark||this.resolveLandmark(t),this.state="unloaded",this.existController=this.resolveController(e)):this.loading()}}destructor(e){this.unloading(e);var{plain:t,text:s}=this.profile;t||s||(e&&(this.landmark&&this.landmark.remove(),this.upperBoundary)&&this.upperBoundary.remove(),this.existController&&this.removeController(this.existController),t=(this.parent||{}).children,e&&t&&(x(t,(e,t)=>t>this.index&&e.index--),t.splice(this.index,1))),x(Reflect.ownKeys(this),e=>{this[e]=null})}initialize(){var{html:e,virtual:t}=this.profile,t=(e?this.node=e:t||this.resolveNode(),(this.directives||{}).loaded);this.resolvePromise(t&&t.processor(this.module,this.scope,this.node),()=>this.postLoaded()),e||this.resolveChildren()}loading(){this.state="loading";const i=(this.directives||{}).loading;i?this.resolvePromise(i.processor(this.module,this.scope,null),e=>{var t,s;Object.is(this.state,"loading")&&(e&&(t=e.constructor,Object.is(t,Object)||!t&&Object.is(typeof e,"object"))&&({root:t,plain:s}=i.decorators,this.resolveScope(e,s,t)),this.initialize())}):this.initialize()}postLoaded(){var e,t,s;this.state="loaded",this.node&&this.node.removeAttribute("dg-cloak"),u?(u(this.scope),u=null):this.directives&&({controllers:e,eventHandlers:t,sentry:s}=this.directives,s&&(this.sentry=Object.assign({},s,{owner:this,processor:s.processor.bind(null,this.module,this.scope)}),T.call(k,this.sentry)),t&&(this.eventHandlers=t.map(({event:e,decorators:t={},processor:s,name:i})=>{const{capture:r,outside:n,once:l,passive:o,target:a}=t,c=a?window[a]||L(document,a):this.node,h=n?window:c,d=e=>this.updateEventHandler(e,i,s.bind(null,this.module,this.scope),t,c);var u;return l||o?(u={capture:r,once:l,passive:o},h.addEventListener(e,d,u),{target:h,event:e,handler:d,options:u}):(u={decorators:t,handler:d},m(e,h,u,r),{target:h,event:e,listener:u})})),e)&&(this.controllers=e.map(e=>this.resolveController(e)).filter(e=>e))}removeChildren(e){if(e)if(this.node)this.node.innerHTML="";else if(this.upperBoundary){let e=this.upperBoundary.nextSibling;for(;e&&!Object.is(e,this.landmark);){var t=e.nextSibling;e.remove(),e=t}}(this.children||[]).length&&(x(this.children,e=>e&&e.destructor(!1)),this.children.length=0)}removeController(t){t.topologySet.forEach(e=>e.unsubscribe(t)),Y.call(t.topologySet),t.observer&&t.observer.disconnect(),Object.is(t,this.childrenController)&&(this.childrenController=null),Object.is(t,this.existController)&&(this.existController=null)}removeDirectives(e,t){e&&(t=S(t),s(t,[...this.controllers,this.childrenController,this.existController],e=>this.removeController(e)),s(t,this.eventHandlers,i))}resolveChildren(){var e=this.profile.children,t=(this.directives||{}).child;!this.children&&(e||t&&Object.is(t.name,"html"))&&(this.children=[]),t?this.childrenController=this.resolveController(t):x(e,(e,t)=>new f(e,this,t))}resolveController({name:e,decorators:t={},processor:s}){const i=this.node,r=!t.once||t.lazy,n={name:e,owner:this,decorators:t,processor:s.bind(null,this.module,this.scope),topologySet:r?new Set:null,observer:null,updater:e&&(o[e]||i&&!l.includes(e)&&Object.is(typeof i[e],"boolean")&&o.$boolean||c)};return r&&i&&Object.is(e,"selected")&&Object.is(i.tagName,"SELECT")&&(n.observer=new MutationObserver(()=>this.updateController(n,!0))).observe(i,{childList:!0}),this.updateController(n,!0),r&&n}resolveLandmark(t){var{index:s,parent:i,parentNode:r,profile:{landmark:n,virtual:e}}=this;if(i){let e=null;s=i.children[s+1];e=s?s.upperBoundary||s.node||s.landmark:t?i.landmark:r.contains(n||null)?n:i.node?null:i.landmark,this.landmark=r.insertBefore(M.cloneNode(!1),e)}else this.landmark=n;(e||(this.directives||{}).each)&&(this.upperBoundary=r.insertBefore(M.cloneNode(!1),this.landmark))}resolveNode(e){var{node:t,unique:s,raw:i}=this.profile,s=s?t:t.cloneNode(i);(this.node=s)[h]=this,e&&e(),s.isConnected||(t=this.landmark||this.parent&&(this.parent.node?null:this.parent.landmark),this.parentNode.insertBefore(s,t&&Object.is(this.parentNode,t.parentNode)?t:null))}resolvePromise(e,t){e instanceof Promise?e.then(t):t(e)}resolveScope(e,t,s){return t||(e=I(e)),this.scope=Object.setPrototypeOf(e,s?j:this.scope),e}unloading(e){if(!Object.is(this.state,"unloaded")){if(!this.controller||this.removeController(this.controller)||(this.controller=null),!this.profile.text){if(this.state="unloading",this.profile.plain||this.childrenMap)return this.removeChildren(e);this.childrenController&&this.removeController(this.childrenController),x(this.controllers,e=>this.removeController(e)),this.controllers=null,x(this.eventHandlers,i),(this.eventHandlers=null)||this.node&&(this.node.$eventListenerMap=null),this.sentry&&(A.call(k,this.sentry),this.sentry=null);var t=(this.directives||{}).unloading,t=(t&&t.processor(this.module,this.scope,this.node),this.node),t=(e&&t&&t.remove(),this.node=null,this.removeChildren(e),this.scope=this.sliceScope||(this.parent||{}).scope||j,(this.directives||{}).unloaded);t&&t.processor(this.module,this.scope,null)}this.state="unloaded"}}updateEventHandler(e,t,s,i,r){if(!t){var{on:n,inside:l,outside:o,every:a,some:c,prevent:h,stop:d,stopImmediate:u}=i,{target:p,currentTarget:m}=e,v=Object.is(p,m);if(!((!(n||l||o)||o&&r.contains&&!r.contains(p)||n&&v||l&&(!m.contains||m.contains(p)&&!v))&&g(e,a,"every")&&g(e,c,"some")))return;h&&e.preventDefault(),d&&e.stopPropagation(),u&&e.stopImmediatePropagation()}const b=O,f=i.remove;O=null;o=s(this.node,t?y[t](this.node,i,e):e);f&&(o instanceof Promise?o.then(e=>this.removeDirectives(e,f)):this.removeDirectives(o,f)),O=b}})=>{var n,a;return f.prototype.updateController=(n=new Set,a=(t,s,e)=>{if(t.profile){const{decorators:{once:r,remove:n,router:l,lazy:o},topologySet:a,updater:c,name:h}=s,d=!r||o;var i;(e||a&&[...a].some(e=>!Object.is(e.oldValue,e.value)))&&(a&&a.size&&(a.forEach(e=>e.unsubscribe(s)),Y.call(a)),e=O,O=d?s:null,i=s.processor(t.node),d&&l&&N.subscribe(),O=e,o&&!h?(s.processor=i,s.decorators.lazy=!1):i instanceof Promise?i.then(e=>(n&&t.removeDirectives(e,n),c&&c(e,t.node,t,s))):(n&&t.removeDirectives(i,n),c&&c(i,t.node,t,s)))}},function(e,t){n.has(e)||(T.call(n,e),E.then(()=>{A.call(n,e),a(this,e,t)}))}),f})(),W=((v={$:"controller","+":"event"},b=t("checked","file","focus","result","selected","value"),f=t("loading","loaded","sentry","unloading","unloaded"),g=t("STYLE","SCRIPT"),O=e=>e.includes("__")?e.replace(/__[a-z]/g,e=>e[2].toUpperCase()):e,y=(e,t,s,i)=>e.eventHandlers.push(j(`Object.is(${t}, _$data_) || (${t} = _$data_)`,Object.assign({event:i},s),"$node, _$data_")),j=((i="$module, $scope")=>(e,t={},s="$node")=>{e=(s?`(${i}, ${s})`:`(${i})`)+` => { with ($module) with ($scope) return (() => { 'use strict';
 return ${e}; })(); }`;s=l[e],t=Object.assign({},t,{processor:s||e});return s||r.push(t),t})(),n=class{constructor(e,t=w,s=null,i=null,r=!1,n=null){this.node=e,this.namespace=t,this.unique=r,this.defaultSlotScope=n||(i||{}).defaultSlotScope||null,this.dynamic=this.plain=this.raw=this.virtual=!1,this.text=this.inlineStyle=this.styles=this.directives=this.landmark=this.children=this.classNames=this.html=this.slotScope=null;r=e.nodeType;if(Object.is(r,Node.TEXT_NODE)){var n=e.textContent.trim();n&&(n.includes("${")&&n.includes("}")?(s&&s.push(this),this.text=j(`\`${n}\``,{name:"text"},""),this.promises=[],this.node=this.resolveLandmark(e)):this.raw=!0,i.children.push(this))}else if(Object.is(r,Node.ELEMENT_NODE)){this.promises=[];const l="dg-cloak",{attributes:o,tagName:a}=e,c=o["@raw"];if(this.html=e.isSameNode(document.documentElement)&&e,this.raw=!(!c&&!g[a]),this.raw)c&&e.removeAttribute("@raw"),s&&e.removeAttribute(l);else{const h=[],d=[],u={controllers:h,eventHandlers:d},p=O(a.toLowerCase()),m=Object.is(e.constructor,HTMLUnknownElement)&&t.fetchViewModule(p.split(".")[0]),v=Object.is(m.state,"resolved"),b="@directive",f=o[b],y="@slot";if((m||Object.is(p,"template"))&&(this.virtual=!0,this.resolveLandmark(e)),m&&!v)this.resolveDirective("$html",`\`${e.outerHTML.replace(/`/g,"\\`").replace(/\${/g,"\\${")}\``,u),this.directives=u;else{if(e.hasAttribute(y)&&(n="_$slot_"+e.getAttribute(y).trim(),e.removeAttribute(y),this.defaultSlotScope)&&(this.defaultSlotScope[n]=e.innerHTML,e.removeAttribute("$html"),e.removeAttribute("$text"),this.resolveDirective("$html#strict",n,u)),x([...o],({name:e,value:t})=>this.resolveDirective(e,t,u)),f?(this.directives=u,this.dynamic=j(f.value),e.removeAttribute(b)):(h.length||(u.controllers=null),d.length||(u.eventHandlers=null),(u.controllers||u.eventHandlers||2<Object.values(u).length)&&(this.directives=u)),this.html)return R();this.plain=!(this.directives||this.landmark)}s&&(this.plain?(e.hasAttribute(l)&&x(e.children,e=>e.setAttribute(l,"")),e.removeAttribute(l)):s.push(this)&&(s=null)),m?v&&this.resolveViewModule(m.fetch(p.split(".").slice(1))):u.child||this.resolveChildren(e,s)}i&&(i.children.push(this),this.promises.length)&&i.promises.push(Promise.all(this.promises))}else Object.is(r,Node.DOCUMENT_FRAGMENT_NODE)?(this.promises=[],this.resolveChildren(e,s)):Object.is(r,Node.COMMENT_NODE)&&(this.raw=!0)}resolveChildren(e,t){e=(this.virtual?e.content:e).childNodes;return e.length?(this.children=[],x(e,e=>Reflect.construct(n,[e,this.namespace,t,this,!!this.unique])),this.plain&&this.children.every(e=>e.raw)&&(this.raw=!0,this.plain=!1)):this.plain&&(this.raw=!0,this.plain=!1),this.raw&&(this.children=null),this}resolveDirective(e,t,s){var i=v[e[0]];if(i){var r=this.node;r.removeAttribute(e);const[c,...h]=O(e.substring(1)).split("#"),d=C(),u={decorators:d};if(x(h.filter(e=>e),e=>{var[e,t]=e.split(":").map(e=>decodeURIComponent(e).trim());t?["every","some"].includes(e)?d[e]=JSON.parse(t):d[e]=t:d[e]=e}),Object.is(i,"event"))u.event=c,f[c]?s[c]=j(t,u,Object.is(c,"sentry")?"$nextRouter":"$node"):s.eventHandlers.push(j(t,u,"$node, $event"));else{e=Object.is(c,"watch"),i=(e||(u.name=c),e&&d.lazy&&(t=`${t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).trim()||"null"}, $node => `+t),j(t,u));if(Object.is(c,"each"))s.each=i,this.resolveLandmark(r),this.unique=!1;else if(Object.is(c,"exist"))s.exist=i,this.resolveLandmark(r),this.unique=!1;else if(Object.is(c,"html")||Object.is(c,"text"))s.child=i;else{if(Object.is(c,"class"))this.classNames||r.classList.length&&(this.classNames=[...r.classList].map(e=>e.trim()));else if(Object.is(c,"style")){if(!this.styles){const p=r.style,m=[...p];m.length&&(this.inlineStyle=r.getAttribute("style"),this.styles=C(),x(m,e=>{var t=p[e],s=p.getPropertyPriority(e);this.styles[e]=s?t+" !"+s:t}))}}else if(b[c]){var n,l,o,a,e=Object.is(c,"value");if(d.oneway||(d.capture=!0,{tagName:r,type:a}=r,n=Object.is(c,"checked"),l=Object.is(c,"selected"),o=Object.is(a,"checkbox")||Object.is(a,"radio"),a=Object.is(a,"file"),Object.is(c,"focus")?(y(s,t,u,"blur"),y(s,t,u,"focus")):(Object.is(r,"INPUT")&&(a&&(Object.is(c,"file")||Object.is(c,"result"))||o&&(n||l)||!o&&!a&&e)||Object.is(r,"OPTION")&&n||Object.is(r,"SELECT")&&l||Object.is(r,"TEXTAREA")&&e)&&y(s,t,u,d.input?"input":"change")),e)return s.controllers.unshift(i)}s.controllers.push(i)}}}}resolveLandmark(e){if(!this.landmark)return this.landmark=M.cloneNode(!1),this.promises.push(E.then(()=>e.replaceWith(this.landmark))),this.landmark}resolveViewModule(e){var t=e.module,t=t instanceof n?t:e.fetchChild("view").module;if(this.children=t.children,this.defaultSlotScope=t.defaultSlotScope,Object.keys(this.defaultSlotScope).length){const s={},i="_$slot_",r="@slot";x(this.node.children,e=>{var t;e.hasAttribute(r)&&(t=e.getAttribute(r).trim(),t=i+t,e.removeAttribute(r),s[t]=Object.is(e.tagName,"TEMPLATE")?e.innerHTML:e.outerHTML)}),Reflect.has(this.defaultSlotScope,i)&&!Reflect.has(s,i)&&this.node.innerHTML&&(s[i]=this.node.innerHTML),this.slotScope=Object.assign({},this.defaultSlotScope,s)}}})=>n)(),ee=class{constructor(e,t,s){this.value=this.oldValue=s,this.parent=null,this.controllerSet=new Set,this.children=C(),this.name=t,e&&((e.children[t]=this).parent=e)}dispatch(e=c.bubble){Object.is(e,c.mutation)||this.parent&&this.parent.parent&&this.parent.dispatch(c.bubble);const t=Object.is(e,c.bubble);this.value&&this.value[$]?this.value[$].forEach(e=>e.trigger(t)):this.trigger(t)}fetch(e,t){e=this.children[e]||new ee(this,e,t);return t&&t[$]&&T.call(t[$],e),e}subscribe(){var e;return O&&(T.call(O.topologySet,this),T.call(this.controllerSet,O),e=this.parent)&&e.parent&&e.unsubscribe(O),this}trigger(t){this.controllerSet.size?this.controllerSet.forEach(e=>e.owner.updateController(e,t))||E.then(()=>this.oldValue=this.value):this.oldValue=this.value}unsubscribe(e){A.call(e.topologySet,this),A.call(this.controllerSet,e)}update(t,e){var s=this.value;Object.is(s,t)||(s instanceof Object&&Reflect.has(s,$)&&A.call(s[$],this),t instanceof Object&&Reflect.has(t,$)&&T.call(t[$],this),this.value=t,this.dispatch(e),Object.is(t)&&this.parent&&(Reflect.deleteProperty(this.parent.children,this.name),this.parent=null),x(f(this.children),e=>this.children[e].update((t||C())[e],c.mutation)))}})=>U("[dg-cloak] { display: none !important; }","dg-global-style",!1)&&document.addEventListener("DOMContentLoaded",()=>Promise.all(["options","modules","routers"].map(e=>z(document,document.baseURI,e))).then(((o="",b=history.pushState,t=history.replaceState,f=null,y=null,i={"":p},r=(e,t=null)=>{try{var s=document.getElementById(e)||L(document,`a[name=${e}]`);if(s)return t&&t.preventDefault(),s.scrollIntoView(),location.href.endsWith("#@"+e)||b.call(history,null,"",location.href+"#@"+e),!0}catch(e){}},a=((v=((s=e=>{R();var t=j.$router&&i[j.$router.path];j.$router=e,N||(N=[...e[$]][0],F.map(e=>new Z(e))),Object.is(t,p)||(t&&t.forEach(e=>e.disabled=!p.has(e)),p.forEach(e=>e.disabled=!1)),r(e.anchor)})=>e=>{var t=e.path;return p=i[t]||(i[t]=new Set),w.resolve(e.modules).then(()=>s(e))})())=>()=>{var e=location.hash.lastIndexOf("#@"),e=0<=e?location.hash.substring(e+2):"";let t=(Object.is(y.mode,"history")?""+location.pathname+location.search:location.hash.replace(e,"")).replace(y.prefix,"");t.startsWith("/")||(t="/"+t);var{mode:s,aliases:i,prefix:r}=y,[n="",l=""]=t.split("?"),n=n.substring(1),o={},a=Object.is(n,"/")?[""]:n.split("/"),c=[];let h=null;if(Reflect.has(i,n))h=i[n];else if(f.match(c,o,a))c.reverse(),h=(c.find(e=>e.redirectPath||Object.is(e.redirectPath,""))||{}).redirectPath;else{if(!Reflect.has(y,"default"))return;h=y.default}if(null!=h)return history.replaceState(null,"",""+(l?h+"?"+l:h)+e||y.prefix);const d={},u=Object.assign({},...c.map(e=>e.variables)),p=Object.assign({},...c.map(e=>e.constants)),m=(l&&x([...new URLSearchParams(l)],([e,t])=>d[e]=t),x(Object.keys(u),e=>{if(Reflect.has(d,e)&&!Reflect.has(p,e)){var t=typeof u[e],s=d[e];try{u[e]=Object.is(t,"string")?s:window[""+t[0].toUpperCase()+t.substring(1)](JSON.parse(s))}catch(e){}}}),{url:location.href,mode:s,prefix:r,path:n,paths:a,modules:new Set(c.map(e=>e.modules).flat()),query:l,queries:d,scenarios:o,variables:u,constants:p,anchor:e});Promise.all([...k].map(t=>Promise.resolve(t.processor(m)).then(e=>({sentry:t,prevent:e})))).then(e=>{e.filter(e=>e.prevent).map(e=>e.sentry.owner).length?b.call(history,null,"",j.$router.url):v(m)})})(),c=class{constructor(e,t=null){var{children:s,constants:i={},variables:r={},modules:n=[],tailable:l=!1,redirect:o=""}=e;let a=(e.path||"").trim();this.modules=S(n),t?(a&&!Object.is(a,"*")||(a=".+"),this.path=t.path+"/"+a):(a="",this.path=""),o&&(this.redirectPath=o instanceof Function?o(j,w.module):g(`($module, $scope) => { with ($module) with ($scope) return (() => { 'use strict'; return ${o}; })() }`)(w.module,j)),this.constants=i,this.variables=r,this.children=null,this.parent=t,this.scenarios=a instanceof Object?Object.keys(a).map(e=>({scenario:e,regExp:new RegExp(a[e]||"^$")})):[{scenario:a,regExp:new RegExp(`^${a}$`)}],s&&(this.children=s.map(e=>new c(e,this))),this.tailable=l||!(this.children||[]).length}match(t,i,r,s=r.length,n=0){var e=this.scenarios.length;if(e<=s&&this.scenarios.every(({scenario:e,regExp:t},s)=>{s=r[n+s];if(t.test(s))return i[e]=s,!0}))return n+=e,(Object.is(s,n)&&this.tailable||(this.children||[]).find(e=>e.match(t,i,r,s,n)))&&t.push(this)}})=>{s=(e,t)=>{function s(...e){return e=i.apply(this,e),this[$]&&this[$].forEach(e=>e.dispatch()),e}const i=(e||{})[t];Reflect.defineProperty(s,"name",{configurable:!0,value:t}),Reflect.defineProperty(e,t,{get:()=>s})};var s,e=(t,e)=>x(e,e=>s(t.prototype,e));m("click",window,e=>{let t=e.target;for(;t&&!["A","AREA"].includes(t.tagName);)t=t.parentNode;var s;t&&t.hasAttribute("href")&&((s=t.getAttribute("href").trim()).startsWith("#")&&r(s.substring(1),e)||s&&!B.test(s)&&(e.preventDefault(),history.pushState(null,"",s)))},!0);const n={detail:!0},l=new CustomEvent("change",n),h=new CustomEvent("input",n),d=(m("reset",window,()=>e=>Object.is(e.target.tagName,"FORM")&&x(L(document.body,"input, textarea",!0,!0),e=>{e.dispatchEvent(h),e.dispatchEvent(l)})),e(Date,["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"])||e(Map,["set","delete","clear"])||e(Set,["add","delete","clear"])||e(WeakMap,["set","delete"])||e(WeakSet,["add","delete"]),JSON.stringify=P(JSON.stringify),x(["concat","copyWithin","fill","find","findIndex","lastIndexOf","pop","push","reverse","shift","unshift","slice","sort","splice","includes","indexOf","join","keys","entries","values","forEach","filter","flat","flatMap","map","every","some","reduce","reduceRight","toLocaleString","toString","at"],e=>Array.prototype[e]=P(Array.prototype[e])),(e,t)=>{var s=(t||[])[2],i=y.prefix;s&&!s.startsWith(i)&&(t[2]=""+i+s),e.apply(history,t),a()});return history.pushState=(...e)=>d(b,e),history.replaceState=(...e)=>d(t,e),window.$dagger=Object.freeze(Object.assign(C(),{register:e,version:"1.0.0-RC-release",validator:()=>{}})),([t,e,s])=>{o=e.base;const i=(y=s.content).prefix,r=Object.is(y.mode,"history"),n=(y.prefix=(r?"/":"#")+(i?i+"/":""),j=Object.seal(I({$router:null})),q(e.content),document.documentElement),l=y.routing||{modules:Object.keys(e.content)};u=e=>{j=e,f=new c(l);e=t.content.rootSelectors,e=new Set(e.map(e=>[...L(document,e,!0)]).flat()),e.delete(n),e=[...e];x(e,e=>Reflect.construct(W,[e,w,F,null,!0])),m("popstate",window,a),history.replaceState(null,"",r?""+location.pathname+location.search+location.hash:location.hash)},(w=new Q({content:e.content,type:v.namespace},o)).resolve(new Set(S(l.modules||[]))).then(()=>p.forEach(e=>e.disabled=!1)||new Z(new W(n)))}})())))();