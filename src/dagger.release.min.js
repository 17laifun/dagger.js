export default((h=Symbol("context"),g=null,O={integrity:!0,rootSelectors:["title","body"],routing:{mode:"history",aliases:{},default:"",prefix:"",redirects:{},scenarios:{}}},r=[],c={bubble:"bubble",self:"self",mutation:"mutation"},C=null,d=[],j=null,x=()=>Object.create(null),n=x(),S=new Set,E=(t,s)=>{if(t){var i=t.length||0;for(let e=0;e<i;++e)s(t[e],e)}},w=(...e)=>{const t=x();return E(e,e=>t[e]=!0),t},F=x(),u=null,N=Symbol("meta"),p=Promise.resolve(),A={json:"json",namespace:"namespace",script:"script",style:"style",string:"string",template:"template"},q=null,k=new Set,a=new WeakMap,T=document.createTextNode(""),f=((r={template:{uri:["#template"],type:A.template,style:"style",optional:!0},script:{uri:['script[type="dagger/script"]'],type:A.script,optional:!0},style:{uri:['style[type="dagger/style"]'],type:A.style,optional:!0}},n=(e,t,s)=>({base:e,content:s?Object.assign({},r,t):t}))=>(e,t)=>{e=_(e,'script[type="dagger/configs"]');if(e){const s=e.getAttribute("src"),i=e.hasAttribute("extends");return e.hasAttribute("base")&&(t=new URL(e.getAttribute("base")||"",t).href),s?K(new URL(s,t),e.integrity).then(({content:e})=>n(t,JSON.parse(e),i)):n(t,e.textContent.trim()?JSON.parse(e.textContent):{},i)}return{base:t,content:r}})(),R=e=>n[e]||(n[e]=new Function(`return ${e};`)()),v=e=>Object.is(typeof e,"string"),b=e=>Reflect.ownKeys(e).filter(e=>!Object.is(e,N)),$=([e,...t],s={stop:!1})=>{if(!s.stop)return e instanceof Promise?e.then(e=>$([e,...t],s)):e instanceof Function?$([e(null,s),...t],s):t.length?$([t.shift()(e,s),...t],s):e},y=JSON.stringify,M=Set.prototype.add,J=Set.prototype.clear,m=Set.prototype.delete,Y=Map.prototype.clear,V=Map.prototype.set,L=WeakMap.prototype.set,P=()=>{r.length&&(E(R(`[${r.map(e=>e.processor).join(", ")}]`),(e,t)=>{t=r[t];n[t.processor]=e,t.processor=e}),r.length=0)},U=s=>function(...e){var t=g,e=(g=null,s.apply(this,e));return g=t,e},_=(e,t,s=!1)=>e[s?"querySelectorAll":"querySelector"](t),K=(e,t="")=>fetch(e,O.integrity&&t?{integrity:"sha256-"+t}:{}).then(e=>{if(e.ok){const t=e.headers.get("content-type");return e.text().then(e=>({content:e,type:t}))}}).catch(()=>{}),H=e=>{var t=document.createElement("template");return t.innerHTML=e,t.content},D=(e,s)=>E(e.children,t=>{Object.is(t.tagName,"TEMPLATE")?(t.getAttribute("$html")&&t.setAttribute("dg_scoped_styles",s.join(",")),D(t.content,s)):t instanceof HTMLElement&&E(s,e=>t.setAttribute(e,""))}),I=(e,t=!0)=>{if(!v(e)){if(null==e||Number.isNaN(e))return"";if(e instanceof Object)return y(e);e=String(e)}return t?e.trim():e},z=((r=Object.prototype.hasOwnProperty,n=new Set([...Reflect.ownKeys(Symbol).map(e=>Symbol[e]).filter(e=>Object.is(typeof e,"symbol")),h,N]),l=new WeakMap,o=new Set([void 0,Array,Object]),a={get:(e,t)=>{const s=e[t];if(g&&!n.has(t)&&(Object.is(s)||r.call(e,t))){const i=g.topologySet;E([...e[N]].filter(e=>!e.parent||i.has(e)),e=>e.fetch(t,s).subscribe())}return s},set:(e,t,s)=>{var i;return e[t]=s,!n.has(t)&&r.call(e,t)&&(i=e[N],g&&i.forEach(e=>e.unsubscribe(g)),s=z(e,t),i.forEach(e=>e.fetch(t).update(s,c.self))),!0},deleteProperty:(e,t)=>{var s=Reflect.has(e,t);return!!Reflect.deleteProperty(e,t)&&(s&&v(t)&&e[N].forEach(e=>e.fetch(t).update(void 0,c.self)),!0)}})=>(e,t)=>{var s,i=null==t;let r=i?e:e[t];return(r instanceof Object||r&&!r.constructor)&&((s=l.get(r))?r=s:(r[N]=new Set,o.has(r.constructor)&&(s=new Proxy(r,a),L.call(l,r,s),E(b(r),e=>z(r,e)),r=s),L.call(l,r,r))),i?r[N].add(new Z(null,"",r)):e[t]=r,r})(),W=((n=new Map,r={json:"dagger/json",namespace:"dagger/configs",script:"dagger/script",style:"dagger/style",string:"dagger/string"},l=x(),i={html:"text/html",json:"application/json",script:["application/javascript","javascript/esm","text/javascript"],style:"text/css"},o=/^[$a-zA-Z_]{1}[\w-$]*(\.[$a-zA-Z_]{1}[\w-$]*)*$/,a=/(?:^|;|\s+)(?:export|import)\s*?(?:(?:(?:[$\w*\s{},]*)\s*from\s*?)|)(?:(?:"([^"]+)?")|(?:'([^']+)?'))[\s]*?(?:$|)/gm,c=/^(http:\/\/|https:\/\/|\/|\.\/|\.\.\/)/i,h=(e,{config:t,module:s,name:i,type:r})=>{Object.is(r,A.script)?!Reflect.has(t,"anonymous")||t.anonymous?Object.assign(e,s):e[i]=s:Object.is(r,A.namespace)&&t.explicit||Object.is(r,A.json)?t.anonymous?Object.assign(e,s):e[i]=s:Object.is(r,A.string)&&(e[i]=s)},t=((e=w(...Object.keys(A).map(e=>"@"+e)),i=(e,t)=>((e=!Array.isArray(e)&&e instanceof Object?e:{uri:e,candidates:e}).candidates&&!Array.isArray(e.candidates)&&(e.candidates=[e.candidates]),Object.assign(e,(e.candidates||[]).find(e=>{try{return e instanceof Object&&(!Reflect.has(e,"match")||matchMedia(e.match).matches||R(e.match))}catch(e){return!1}})),e.type||(e.type=t),e.uri&&!Array.isArray(e.uri)&&(e.uri=[e.uri]),e))=>s=>(E(Object.keys(s),t=>e[t]&&s[t]instanceof Object?(E(Object.keys(s[t]),e=>s[e]=i(s[t][e],t.substring(1))),Reflect.deleteProperty(s,t)):s[t]=i(s[t])),s))(),d=((l=/([\s:+>~])/)=>(t,e,s,i)=>{var r,n;e instanceof CSSKeyframesRule&&(r=e.name,e.name=r+"-"+s,t.insertRule(e.cssText,i.index++),e.name=r),e.cssRules?E(e.cssRules,e=>d(t,e,s,i)):e.selectorText&&((n=(r=e.style).animationName)&&(r.animationName=n+"-"+s),t.insertRule(`${e.selectorText.split(",").map(e=>(e=e.trim())&&`${l.test(e)?e.replace(l,`[${s}]$1`):e+`[${s}]`}, [${s}] `+e).join(", ")}{${r.cssText}}`,i.index++),n)&&(r.animationName=n)})(),u=(i,r)=>{try{E(b(i),e=>{var t=i[e],s=t instanceof Function;r[e]=s?U(t):t,t instanceof Object&&!s&&u(t,t)})}catch(e){}finally{return r}},p=(e,t,s)=>{var i=document.createElement("style");return e&&(i.textContent=e),document.head.appendChild(i),i.disabled=s,i.setAttribute("name",t),i},m=class{constructor(e={},t="",s="",i=null){this.name=s,this.state="unresolved",this.childrenCache=x(),this.valid=!0,this.module=this.integrity=this.parent=this.children=this.type=this.content=this.resolvedContent=null,i?(this.parent=i,this.path=i.path?i.path+"."+s:s,this.baseElement=i.baseElement):(this.path=s,this.baseElement=document);var{integrity:s,uri:r,type:n}=e;Reflect.has(e,"content")?this.content=e.content:r&&(this.URIs=r),n&&(this.type=n),O.integrity&&s&&(this.integrity=s),this.config=e,this.promise=new Promise(e=>this.resolver=e),this.base=new URL(e.base||t,(i||{}).base||document.baseURI).href}fetch(t){const s=(t=t.split(".")).shift().trim(),e=this.childrenCache[s]||(this.childrenCache[s]=(this.children||[]).find(e=>Object.is(e.name,s)));return e&&e.resolve().then(e=>e.valid&&e.fetchSync(t))}fetchSync(e){if(!e.length)return this;const t=e.shift().trim(),s=this.childrenCache[t]||(this.childrenCache[t]=(this.children||[]).find(e=>Object.is(e.name,t)&&e.valid));return s&&s.fetchSync(e)}resolve(){if(Object.is(this.state,"unresolved")){this.state="resolving";let e=null;var t;e=null==this.content?[...this.URIs.map(s=>(e,t)=>(t.stop=!!e)||this.resolveURI(s)),e=>e||(this.valid=!1,this.resolved(null))]:(t=this.content,[...e=[A.namespace,A.json].includes(this.type)?[Object.is(this.type,A.namespace)?this.resolveNamespace(t):t]:[this.resolveContent(t)],e=>this.resolveModule(e),e=>this.resolved(e)]),$(e)}else this.valid&&Object.is(this.state,"resolved")&&(Object.is(this.type,A.style)?this.resolveModule(this.resolvedContent):Object.is(this.type,A.namespace)&&E(this.children,e=>e.resolve()));return this.promise}resolveContent(e){v(e)||(e=y(e)),this.content=e.trim();var t=this.type;if(Object.is(t,A.namespace))return this.baseElement=H(e),$([f(this.baseElement,this.base),({base:e,content:t})=>this.resolveNamespace(t,e)]);if(Object.is(t,A.script))return import("data:text/javascript, "+encodeURIComponent(e.replace(a,(e,t,s)=>e.replace(t||s,new URL(t||s,this.base)))));if(Object.is(t,A.template)){const s=H(e),i=[],r=this.config.style;return r&&i.push(Promise.all((Array.isArray(r)?r:[r]).map(e=>this.parent.fetch(e).then(e=>e.module&&e.module.getAttribute("name")))).then(e=>D(s,e.filter(e=>e)))),i.push(()=>{const e=this.parent.path,t=new B(s,e?e.split("."):[],null,null,!1,{});return Promise.all(t.promises||[]).then(()=>t)}),$(i)}return Object.is(t,A.style)?p(e,"dg_style_module_content-"+this.path.replace(/\./g,"_"),!0):Object.is(t,A.json)?JSON.parse(e):Object.is(t,A.string)?this.content:void 0}resolved(e){return this.module=e,this.state="resolved",this.resolver(this),this}resolveEmbeddedType(e){if(!this.type){var{tagName:t,type:s}=e,i=Object.is(t,"SCRIPT");if(Object.is(t,"TEMPLATE"))this.type=A.template;else{if(i&&Object.is(s,r.namespace))return this.type=A.namespace,this.resolveNamespace(JSON.parse(e.innerHTML),e.getAttribute("base")||this.base);i&&Object.is(s,r.script)?this.type=A.script:i&&Object.is(s,r.json)?this.type=A.json:Object.is(t,"STYLE")&&Object.is(s,r.style)?this.type=A.style:this.type=A.string}}}resolveModule(e){let t=this.resolvedContent=e;var s=this.type;if(Object.is(s,A.namespace))t=x(),this.children=this.resolvedContent,E(e,e=>h(t,e)),this.parent&&this.parent.resolve().then(e=>Object.setPrototypeOf(t,e.module));else if(Object.is(s,A.script))t=u(t,x());else if(Object.is(s,A.style)){if(!Reflect.has(this.config,"scoped")||this.config.scoped){const i="dg_style_module-"+this.path.replace(/\./g,"_"),r=p("",i,!0),n=r.sheet,l={index:0};E(t.sheet.cssRules,e=>d(n,e,i,l)),t=r}M.call(S,t)}return t}resolveNamespace(e,s=this.base){return this.parent&&t(e),this.children=Object.entries(e).map(([e,t])=>this.parent?new m(t,s,e,this):(t.parent=this)&&t),Promise.all(this.children.map(e=>e.resolve()).filter((e,t)=>{t=this.children[t].config.prefetch;return!t||new RegExp(t).test(Object.is(O.routing.mode,"history")?location.pathname:location.hash)}))}resolveRemoteType(e,t,s){this.base=s,this.type||(s.endsWith(".js")||s.endsWith(".mjs")||i.script.some(e=>t.includes(e))?this.type=A.script:s.endsWith(".css")||t.includes(i.style)?this.type=A.style:s.endsWith(".html")||t.includes(i.html)?(e=e.trim(),this.type=e.startsWith("<html>")||e.startsWith("<!DOCTYPE ")?A.namespace:A.template):s.endsWith(".json")||t.includes(i.json)?this.type=A.json:this.type=A.string)}resolveURI(t){if(t=t.trim()){if(o.test(t))return this.parent.fetch(t).then(e=>(this.resolvedContent=e.resolvedContent,(this.type||(this.type=e.type))&&(!Object.is(this.type,A.namespace)||this.resolveModule(e.resolvedContent))&&this.resolved(e.module)));let e=null;if(c.test(t)){const i=l[this.integrity];if(i)e=[i.resolve(),()=>(this.type=i.type)&&i.resolvedContent];else{O.integrity&&this.integrity&&(l[this.integrity]=this);const r=new URL(t,this.base).href;e=[(e,t)=>$([K(r,this.integrity),e=>e||(t.stop=!0)]),({content:e,type:t})=>this.resolveRemoteType(e,t,r)||this.resolveContent(e)]}}else{var s,t=_(this.baseElement,t);t&&(s=n.get(t),e=s?[s.resolve(),e=>(this.type=e.type)&&e.resolvedContent]:(V.call(n,t,this),[this.resolveEmbeddedType(t)||this.resolveContent(t.innerHTML)]))}return e&&$([...e,e=>this.resolveModule(e),e=>this.resolved(e)])}}})=>(p("[dg-cloak] { display: none !important; }","dg-global-style",!1),m.normalizeConfig=t,m))(),X=((b={checked:e=>Object.is(e.tagName,"OPTION")?e.selected:e.checked,file:e=>(e.multiple?[...e.files]:e.files[0])||null,focus:e=>e.isSameNode(document.activeElement),result:((s=(t,{buffer:e,data:s,encoding:i})=>{let r={file:t,loaded:0,progress:0,state:"initialized",content:null};const n=new FileReader;return n.onloadstart=()=>(r=r&&r[N]&&[...r[N]][0].value||r).state="loading",n.onprogress=({loaded:e})=>(r.loaded=e,r.progress=Math.floor(e/t.size*100)),n.onload=()=>(r.state="loaded",r.content=n.result),n.onerror=()=>r.state="error",n.onabort=()=>r.state="abort",e?n.readAsArrayBuffer(t):s?n.readAsDataURL(t):n.readAsText(t,i||"utf-8"),r})=>(e,t)=>e.multiple?[...e.files].map(e=>s(e,t)):s(e.files[0],t))(),selected:e=>{var{name:t,type:s,tagName:i}=e,i=Object.is(i,"SELECT"),t=[...i?e.selectedOptions:_(document.body,`input[type="${s}"][name="${t}"]:checked`,!0)].map(e=>r(e));return(i?e.multiple:Object.is(s,"checkbox"))?t:t[0]},value:({type:e,value:t,valueAsNumber:s},{number:i,trim:r},{detail:n})=>n?null:["date","datetime-local"].includes(e)?new Date(s||0):["number","range"].includes(e)?s:i?Number.parseFloat(t):r?t.trim():t},l=["draggable"],c=(e,t,s,{name:i})=>t&&(null==e?t.removeAttribute(i):t.setAttribute(i,I(e))),o=((a=new Event("change"))=>{return{$boolean:(e,t,s,{name:i})=>t.toggleAttribute(i,!!e),checked:(t,s,{parentNode:i},{decorators:r})=>{var{tagName:n,type:e}=s,l=Object.is(n,"OPTION"),o=Object.is(e,"checkbox");if(l||Object.is(n,"INPUT")&&(o||Object.is(e,"radio"))){let e=null;if(l){if(Object.is(t,s.selected))return;s.selected=t;n=i;n&&(!n.multiple&&t&&(e=_(n,"option",!0)),n.$changeEvent||(n.$changeEvent=!0,n.addEventListener("change",e=>E(_(e.target,"option",!0),e=>e.dispatchEvent(a)))))}else o&&r.indeterminate&&(s.indeterminate=null==t),s.indeterminate||(s.checked=t),o||t&&(e=_(document.body,`input[type="radio"][name="${s.name}"]`,!0));e&&p.then(()=>E(e,e=>e.dispatchEvent(a)))}else c(t,s,0,{name:"checked"})},class:(t,e,{profile:{classNames:s}})=>{if(t){const i=new Set(s);Array.isArray(t)?E(t,e=>M.call(i,I(e))):t instanceof Object?E(Object.keys(t),e=>t[e]&&M.call(i,e.trim())):M.call(i,I(t)),e.setAttribute("class",[...i].join(" ").trim())}else s?e.setAttribute("class",s.join(" ")):e.removeAttribute("class")},each:((b=(t,e,s,i,r,n,l,o,a,c,h,d,u)=>{let p=null;var m=r.get(s);if(m){if(p=m.shift(),m.length||f.call(r,s),!Object.is(t,p.index)){var{landmark:v,upperBoundary:m}=p,b=[m];let e=m;for(;!Object.is(e,v);)e=e.nextSibling,b.push(e);E(b.reverse(),e=>u.insertBefore(e,(t?i[t-1].landmark||{}:h.upperBoundary).nextSibling)),i.includes(p)&&i.splice(p.index,1),p.index=t,i[t]=p}p.scope[o]=e,p.scope[l]=t}else p=new y(d,h,t,{[l]:t,[o]:e,[a]:s},c);r=n.get(s);r?r.push(p):V.call(n,s,[p])},f=Map.prototype.delete)=>(e,t,i,{decorators:s})=>{e=e||{};const r=new Set(e.values instanceof Function?e.values():Object.values(e)),n=[...e.entries instanceof Function?e.entries():Object.entries(e)],{children:l,childrenMap:o,profile:a,parentNode:c}=i,h=e[N];if(h&&E(n,([t,s])=>s&&s[N]&&h.forEach(e=>e.fetch(t,s))),!n.length)return Y.call(o)||i.removeChildren(!0);o.forEach((e,t)=>r.has(t)||(E(e,e=>e.destructor(!0)),f.call(o,t)));const d=new Map;let{item:u="item",key:p="key",index:m="index",plain:v}=s;Object.is(u,!0)&&(u="item"),Object.is(p,!0)&&(p="key"),Object.is(m,!0)&&(m="index"),E(n,([e,t],s)=>b(s,e,t,l,o,d,m,p,u,v,i,a,c)),l.length=n.length,o.forEach(e=>E(e,e=>(e.parent=null,e.destructor(!0)))),i.childrenMap=d})(),exist:(e,t,s)=>e?Object.is(s.state,"unloaded")&&s.loading():s.unloading(!0),file:()=>{},focus:(e,t,s,{decorators:{prevent:i=!1}})=>e?t.focus({preventScroll:i}):t.blur(),html:(e,t,s,{decorators:{root:i=!1}})=>{if(e=I(e),s.removeChildren(!0),e){const r=[],n=s.profile,l=H(e);t||(e=n.node.getAttribute("dg_scoped_styles"))&&D(l,e.split(",")),Reflect.construct(B,[l,i?[]:n.paths,r,null,!0]),r.length&&(P(),Promise.all(r.map(e=>Promise.all(e.promises||[]))).then(()=>E(r,(e,t)=>s.profile&&Reflect.construct(y,[e,i?null:s,t,null,!1,(e.landmark||e.node).parentNode])))),t?t.appendChild(l):s.parentNode.insertBefore(l,s.landmark)}},result:()=>{},selected:(o=(e,t,s)=>{const i=r(e);return s?(t||[]).some(e=>Object.is(e,i)):Object.is(t,i)},(t,e)=>{var{type:s,tagName:i}=e,r=Object.is(i,"SELECT");if(r||Object.is(i,"INPUT")&&(Object.is(s,"checkbox")||Object.is(s,"radio"))){const n=r?e.multiple:Object.is(s,"checkbox");r?p.then(()=>E(_(e,"option",!0),e=>e.selected=o(e,t,n))):e.checked=o(e,t,n)}else c(t,e,0,{name:"selected"})}),style:(l=(e,t)=>{var s;t&&([t,s=""]=t.split(":").map(e=>e.trim()),e[t]=s)},(t,e,{profile:{inlineStyle:s,styles:i}})=>{if(t){const r=Object.assign({},i);Array.isArray(t)?E(t,e=>l(r,I(e))):t instanceof Object?E(Object.keys(t),e=>r[e.trim()]=I(t[e])):E(I(t).split(";"),e=>l(r,e.trim())),e.style.cssText=Object.keys(r).filter(e=>r[e]).map(e=>`${e}: ${r[e]}; `).join("").trim()}else s?e.setAttribute("style",s):e.removeAttribute("style")}),text:(e,t)=>{e=I(e),Object.is(e,t.textContent)||(t.textContent=e)},value:(n=(e,t=2)=>String(e).padStart(t,"0"),(t,s,e,{decorators:{trim:i=!1}})=>{e.value=t;var{tagName:e,type:r}=s;if(Object.is(e,"INPUT")){e=["date","datetime-local"].includes(r);if(t instanceof Date)if(e||Object.is(r,"week"))s.valueAsNumber=t;else if(Object.is(r,"month"))s.value=t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1);else if(Object.is(r,"time")){r=s.step||0;let e=n(t.getUTCHours())+":"+n(t.getUTCMinutes());r%60&&(e=e+":"+n(t.getUTCSeconds()),r%1)&&(e=e+"."+n(t.getUTCMilliseconds(),3)),s.value=e}else s.value=t;else t=I(t,i),e?s.valueAsNumber=new Date(t):s.value=t}else s.value=I(t,i)})};var n,l,o})(),f=(()=>(n,e,t)=>!e||(e=Array.isArray(e)?e:[e])[t](e=>{{var t=n,s=!(e=String(e)).startsWith("!");s||(e=e.substring(1));const i=new RegExp(e),r=t.getModifierState&&t.getModifierState(e)||[t.code,t.key,t.button].some(e=>i.test(e));return s==r}}))(),s=(s,t,i)=>t&&E(t.filter((e,t)=>e&&(e.index=t,e.decorators)&&s.includes(e.decorators.name)).reverse(),e=>i(e)||t.splice(e.index,1)),r=e=>(e&&Reflect.has(e[h]||{},"value")?e[h]:e).value,y=class{constructor(i,e=null,s=0,t=null,r=!1,n=null){this.directives=i.directives,this.profile=i,this.index=s,this.state="loaded",this.promise=this.resolver=this.parent=this.children=this.childrenMap=this.existController=this.landmark=this.upperBoundary=this.childrenController=this.controller=this.controllers=this.eventHandlers=this.scope=this.sentry=this.node=null,e?(this.parent=e,this.parentNode=n||e.node||e.parentNode,n=i.paths,this.module=(Object.is(n,e.profile.paths)?e:C.fetchSync([...n])).module,this.scope=e.scope,e.children.splice(s,0,this)):(this.parentNode=i.node.parentNode||i.landmark.parentNode,this.module=C.module,this.scope=(u||{}).scope||j);var n=i.dynamic;n&&(n=n.processor(this.module,this.scope,this.parentNode),h=this.directives,this.directives=Object.assign({},h,{controllers:[...h.controllers||[]],eventHandlers:[...h.eventHandlers||[]]}),E(Array.isArray(n)?n:[n],e=>{var t,s;v(e)&&(e={name:(s=(t=e.indexOf("="))<0)?e:e.substring(0,t),value:s?"":e.substring(t+1)}),i.resolveDirective(e.name,e.value||"",this.directives)}),P());const{plain:l,text:o,html:a,raw:c}=i;if(a)return(u=this).loading();if(c||l)this.resolveNode(),this.node.removeAttribute&&this.node.removeAttribute("dg-cloak"),l&&this.resolveChildren();else if(o)this.resolveNode(()=>this.controller=this.resolveController(o));else{var{each:h,exist:n}=this.directives||{};if((h||n||i.virtual)&&this.resolveLandmark(t),t)this.sliceScope=this.resolveScope(t,r,h.decorators.root),e.children.length>s+1&&E(e.children,(e,t)=>e&&s<t&&e.index++);else if(i.slotScope&&(this.slotScope=this.resolveScope(Object.assign({},i.slotScope),!0)),h)return this.children=[],this.childrenMap=new Map,this.controller=this.resolveController(h),this;n?(this.state="unloaded",this.existController=this.resolveController(n)):this.loading()}}destructor(e){this.unloading(e);var{plain:t,text:s}=this.profile;t||s||(e&&(this.landmark&&this.landmark.remove(),this.upperBoundary)&&this.upperBoundary.remove(),this.existController&&this.removeController(this.existController),t=(this.parent||{}).children,e&&t&&(E(t,(e,t)=>t>this.index&&e.index--),t.splice(this.index,1))),E(Reflect.ownKeys(this),e=>{this[e]=null})}initialize(e,t){e&&(s=e.constructor,Object.is(s,Object)||!s&&Object.is(typeof e,"object"))&&this.resolveScope(e,!1,t);var{html:s,virtual:e}=this.profile;s?this.node=s:e||this.resolveNode(),this.loaded(),s||this.resolveChildren()}loading(){this.state="loading";const t=(this.directives||{}).loading;t?this.resolvePromise(t.processor(this.module,this.scope,null),e=>Object.is(this.state,"loading")&&this.initialize(e,t.decorators.root)):this.initialize()}loaded(){var e=(this.directives||{}).loaded;this.resolvePromise(e&&e.processor(this.module,this.scope,this.node),()=>Object.is(this.state,"loading")&&this.postLoaded())}postLoaded(){var e,t,s;this.resolver&&(this.resolver(),this.resolver=null),this.state="loaded",this.node&&this.node.removeAttribute("dg-cloak"),this.directives&&({controllers:e,eventHandlers:t,sentry:s}=this.directives,s&&(this.sentry=s.processor.bind(null,this.module,this.scope),M.call(k,this.sentry)),t&&(this.eventHandlers=t.map(({event:e,decorators:t={},processor:s,name:i,options:r})=>{var n=t.target||this.node,l=e=>this.updateEventHandler(e,i,s.bind(null,this.module,this.scope),t);return n.addEventListener(e,l,r),{target:n,event:e,handler:l,options:r,decorators:t}})),e)&&(this.controllers=e.map(e=>this.resolveController(e)).filter(e=>e))}removeChildren(e){if(e)if(this.node)this.node.innerHTML="";else if(this.upperBoundary){let e=this.upperBoundary.nextSibling;for(;e&&!Object.is(e,this.landmark);){var t=e.nextSibling;e.remove(),e=t}}(this.children||[]).length&&(E(this.children,e=>e&&e.destructor(!1)),this.children.length=0)}removeController(t){t.topologySet.forEach(e=>e.unsubscribe(t)),J.call(t.topologySet),t.observer&&t.observer.disconnect(),Object.is(t,this.childrenController)&&(this.childrenController=null),Object.is(t,this.existController)&&(this.existController=null)}removeDirectives(e,t){e&&(Array.isArray(t)||(t=[t]),s(t,[...this.controllers,this.childrenController,this.existController],e=>this.removeController(e)),s(t,this.eventHandlers,({target:e,event:t,handler:s,options:i})=>e.removeEventListener(t,s,i)))}resolveChildren(){var e=this.profile.children,t=(this.directives||{}).child;!this.children&&(e||t&&Object.is(t.name,"html"))&&(this.children=[]),t?this.childrenController=this.resolveController(t):E(e,(e,t)=>new y(e,this,t))}resolveController({name:e,decorators:t=F,processor:s}){const i=this.node,r=!t.once||t.lazy,n={name:e,owner:this,decorators:t,processor:s.bind(null,this.module,this.scope),topologySet:r?new Set:null,observer:null,updater:e&&(o[e]||i&&!l.includes(e)&&Object.is(typeof i[e],"boolean")&&o.$boolean||c)};return r&&i&&Object.is(e,"selected")&&Object.is(i.tagName,"SELECT")&&(n.observer=new MutationObserver(()=>this.updateController(n,!0))).observe(i,{childList:!0}),this.updateController(n,!0),r&&n}resolveLandmark(t){var{index:s,parent:i,parentNode:r,profile:{landmark:n,virtual:e}}=this;if(i){let e=null;s=i.children[s+1];e=s?s.upperBoundary||s.node||s.landmark:t?i.landmark:r.contains(n||null)?n:i.node?null:i.landmark,this.landmark=r.insertBefore(T.cloneNode(!1),e)}else this.landmark=n;(e||(this.directives||{}).each)&&(this.upperBoundary=r.insertBefore(T.cloneNode(!1),this.landmark))}resolveNode(e){var{node:t,unique:s,raw:i}=this.profile,s=s?t:t.cloneNode(i);(this.node=s)[h]=this,e&&e(),s.isConnected||(t=this.landmark||this.parent&&(this.parent.node?null:this.parent.landmark),this.parentNode.insertBefore(s,t&&Object.is(this.parentNode,t.parentNode)?t:null))}resolvePromise(e,t){e instanceof Promise?(t&&(e=e.then(t)),this.resolver||(this.promise=new Promise(e=>this.resolver=e))):t&&t(e)}resolveScope(e,t,s){return t||(e=z(e)),this.scope=Object.setPrototypeOf(e,s?j:this.scope),e}unloading(e){if(!Object.is(this.state,"unloaded")){if(!this.controller||this.removeController(this.controller)||(this.controller=null),!this.profile.text){if(this.state="unloading",this.profile.plain||this.childrenMap)return this.removeChildren(e);this.childrenController&&this.removeController(this.childrenController),E(this.controllers,e=>this.removeController(e)),this.controllers=null,E(this.eventHandlers,({target:e,event:t,handler:s,options:i})=>e.removeEventListener(t,s,i)),this.eventHandlers=null,this.sentry&&(m.call(k,this.sentry),this.sentry=null);var t=(this.directives||{}).unloading,t=(t&&t.processor(this.module,this.scope,this.node),this.node),t=(e&&t&&t.remove(),this.node=null,this.removeChildren(e),this.scope=this.sliceScope||(this.parent||u).scope,(this.directives||{}).unloaded);t&&t.processor(this.module,this.scope,null)}this.state="unloaded"}}updateEventHandler(e,t,s,i){if(!t){var{current:r,inside:n,every:l,some:o,prevent:a,stop:c,stopImmediate:h}=i,{target:d,currentTarget:u}=e,p=Object.is(d,u);if(!((!r&&!n||r&&p||n&&u.contains(d)&&!p)&&f(e,l,"every")&&f(e,o,"some")))return;a&&e.preventDefault(),c&&e.stopPropagation(),h&&e.stopImmediatePropagation()}const m=g,v=i.remove;g=null;r=s(this.node,t?b[t](this.node,i,e):e);v&&(r instanceof Promise?r.then(e=>this.removeDirectives(e,v)):this.removeDirectives(r,v)),g=m}})=>{var i,n;return y.prototype.updateController=(i=new Set,n=(t,s,e)=>{if(t.profile){const{decorators:{once:r,remove:n,router:l,lazy:o},topologySet:a,updater:c,name:h}=s,d=!r||o;var i;(e||a&&[...a].some(e=>!Object.is(e.oldValue,e.value)))&&(a&&a.size&&(a.forEach(e=>e.unsubscribe(s)),J.call(a)),e=g,g=d?s:null,i=s.processor(t.node),d&&l&&q.subscribe(),g=e,o&&!h?(s.processor=i,s.decorators.lazy=!1):i instanceof Promise?i.then(e=>(n&&t.removeDirectives(e,n),c&&c(e,t.node,t,s))):(n&&t.removeDirectives(i,n),c&&c(i,t.node,t,s)))}},function(e,t){i.has(e)||(M.call(i,e),p.then(()=>{m.call(i,e),n(this,e,t)}))}),y})(),B=((m={$:"controller","+":"event"},v=w("checked","file","focus","result","selected","value"),b=w("loading","loaded","sentry","unloading","unloaded"),O=w("STYLE","SCRIPT"),f=(e,t,s,i)=>e.eventHandlers.push(j(`Object.is(${t}, _$data_) || (${t} = _$data_)`,Object.assign({event:i},s),"$node, _$data_")),y=e=>{{var[s=t=>{try{return t&&(window[t]||R(t))}catch(e){return t}}]=[];const[t,...i]=((e=e).includes("-")?e.trim().replace(/-[a-z]/g,e=>e[1].toUpperCase()).replace(/-[A-Z]/g,e=>"-"+e[1].toLowerCase()):e).split("#"),r=x();return E(i.filter(e=>e),e=>{var[e,t]=e.split(":").map(e=>decodeURIComponent(e));r[e]=!t||s(t)}),{name:t,decorators:r}}},j=((i="$module, $scope")=>(e,t,s="$node")=>{e=`${s?`(${i}, ${s})`:`(${i})`} => { with ($module) with ($scope) return ${e}; }`;s=n[e],t=Object.assign({},t,{processor:s||e});return s||r.push(t),t})(),S=(e,t)=>{let s=!t,i=(t||{}).promise;if(t){if(!(i=t.fetch(e)))return S(e,t.parent);s=!0}return{promise:i,isVirtualElement:s}},o=class{constructor(e,t=[],s=null,i=null,r=!1,n=null){this.node=e,this.unique=r,this.paths=t,this.defaultSlotScope=n||(i||{}).defaultSlotScope||null,this.dynamic=this.plain=this.raw=this.virtual=!1,this.text=this.inlineStyle=this.styles=this.directives=this.landmark=this.children=this.classNames=this.html=this.slotScope=null;r=e.nodeType;if(Object.is(r,Node.TEXT_NODE)){t=e.textContent.trim();t&&(t.includes("${")&&t.includes("}")?(s&&s.push(this),this.text=j(`\`${t}\``,{name:"text"},""),this.promises=[],this.node=this.resolveLandmark(e)):this.raw=!0,i.children.push(this))}else if(Object.is(r,Node.ELEMENT_NODE)){this.promises=[];const l="dg-cloak",{attributes:o,tagName:a}=e;if(this.html=e.isSameNode(document.documentElement)&&e,this.raw=!(!o["@raw"]&&!O[a]),this.raw)e.removeAttribute("@raw"),s&&e.removeAttribute(l);else{const c=[],h=[],d={controllers:c,eventHandlers:h},u=a.toLowerCase(),p=C.fetchSync([...this.paths]),{promise:m=null,isVirtualElement:v=!1}=e instanceof HTMLUnknownElement&&S(u,p)||{},b="@directive",f=o[b],y=Object.is(u,"template"),g="@slot";if(e.hasAttribute(g)&&(n="_$slot_"+e.getAttribute(g).trim(),e.removeAttribute(g),this.defaultSlotScope)&&(this.defaultSlotScope[n]=e.innerHTML,e.removeAttribute("$html"),e.removeAttribute("$text"),this.resolveDirective("$html",n,d)),(v||y)&&(this.virtual=!0,this.resolveLandmark(e)),E([...o],({name:e,value:t})=>this.resolveDirective(e,t,d)),f?(this.directives=d,this.dynamic=j(f.value),e.removeAttribute(b)):(c.length||(d.controllers=null),h.length||(d.eventHandlers=null),(d.controllers||d.eventHandlers||2<Object.values(d).length)&&(this.directives=d)),this.html)return P();this.plain=!(this.directives||this.landmark),s&&(this.plain?(e.hasAttribute(l)&&E(e.children,e=>e.setAttribute(l,"")),e.removeAttribute(l)):s.push(this)&&(s=null)),v?this.promises.push(m.then(e=>this.resolveTemplate(e))):d.child||this.resolveChildren(e,s)}i&&(i.children.push(this),this.promises.length)&&i.promises.push(Promise.all(this.promises))}else Object.is(r,Node.DOCUMENT_FRAGMENT_NODE)&&(this.promises=[],this.resolveChildren(e,s))}resolveChildren(e,t){e=(this.virtual?e.content:e).childNodes;return e.length?(this.children=[],E(e,e=>Object.is(e.nodeType,Node.TEXT_NODE)&&!e.data.trim()||Object.is(e.nodeType,Node.COMMENT_NODE)?this.promises.push(p.then(()=>e.remove())):Reflect.construct(o,[e,this.paths,t,this,!!this.unique])),this.plain&&this.children.every(e=>e.raw)&&(this.raw=!0,this.plain=!1)):this.plain&&(this.raw=!0,this.plain=!1),this.raw&&(this.children=null),this}resolveDirective(e,t,s){var i=m[e[0]];if(i){var r=this.node,n=(r.removeAttribute(e),{}),{name:e,decorators:l}=y(e.substring(1));if(n.decorators=l,Object.is(i,"event"))n.event=e,b[e]?s[e]=j(t,n,Object.is(e,"sentry")?"$nextRouter":"$node"):(n.options=l,s.eventHandlers.push(j(t,n,"$node, $event")));else{i=Object.is(e,"watch"),i=(i||(n.name=e),i&&l.lazy&&(t=`${t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).trim()||"null"}, $node => `+t),j(t,n));if(Object.is(e,"each"))s.each=i,this.resolveLandmark(r),this.unique=!1;else if(Object.is(e,"exist"))s.exist=i,this.resolveLandmark(r),this.unique=!1;else if(Object.is(e,"html")||Object.is(e,"text"))s.child=i;else{if(Object.is(e,"class"))this.classNames||r.classList.length&&(this.classNames=[...r.classList].map(e=>e.trim()));else if(Object.is(e,"style")){if(!this.styles){const u=r.style,p=[...u];p.length&&(this.inlineStyle=r.getAttribute("style"),this.styles=x(),E(p,e=>{var t=u[e],s=u.getPropertyPriority(e);this.styles[e]=s?t+" !"+s:t}))}}else if(v[e]){var o,a,c,h,d=Object.is(e,"value");if(l.oneway||(n.options=!0,{tagName:r,type:h}=r,o=Object.is(e,"checked"),a=Object.is(e,"selected"),c=Object.is(h,"checkbox")||Object.is(h,"radio"),h=Object.is(h,"file"),Object.is(e,"focus")?(f(s,t,n,"blur"),f(s,t,n,"focus")):(Object.is(r,"INPUT")&&(h&&(Object.is(e,"file")||Object.is(e,"result"))||c&&(o||a)||!c&&!h&&d)||Object.is(r,"OPTION")&&o||Object.is(r,"SELECT")&&a||Object.is(r,"TEXTAREA")&&d)&&f(s,t,n,l.input?"input":"change")),d)return s.controllers.unshift(i)}s.controllers.push(i)}}}}resolveLandmark(e){if(!this.landmark)return this.landmark=T.cloneNode(!1),this.promises.push(p.then(()=>e.replaceWith(this.landmark))),this.landmark}resolveTemplate(e){var t,s=e.module;let i=a.get(s);if(i||(i=x(),e=(t=s instanceof o)?s:e.children.find(e=>Object.is(e.name,"template")).module,i.children=e.children,i.defaultSlotScope=e.defaultSlotScope,L.call(a,s,i),t)||L.call(a,e,i),Object.assign(this,i),Object.keys(this.defaultSlotScope).length){const r={},n="_$slot_",l="@slot";E(this.node.children,e=>{var t;e.hasAttribute(l)&&(t=n+e.getAttribute(l).trim(),e.removeAttribute(l),r[t]=Object.is(e.tagName,"TEMPLATE")?e.innerHTML:e.outerHTML)}),Reflect.has(this.defaultSlotScope,n)&&!Reflect.has(r,n)&&(r[n]=this.node.innerHTML),this.slotScope=Object.assign({},this.defaultSlotScope,r)}return""}})=>o)(),Z=class{constructor(e,t,s){this.value=this.oldValue=s,this.parent=null,this.controllerSet=new Set,this.children=x(),this.name=t,e&&((e.children[t]=this).parent=e)}dispatch(e=c.bubble){Object.is(e,c.mutation)||this.parent&&this.parent.parent&&this.parent.dispatch(c.bubble);const t=Object.is(e,c.bubble);this.value&&this.value[N]?this.value[N].forEach(e=>e.trigger(t)):this.trigger(t)}fetch(e,t){e=this.children[e]||new Z(this,e,t);return t&&t[N]&&M.call(t[N],e),e}subscribe(){var e;return g&&(M.call(g.topologySet,this),M.call(this.controllerSet,g),e=this.parent)&&e.parent&&e.unsubscribe(g),this}trigger(t){this.controllerSet.size?this.controllerSet.forEach(e=>e.owner.updateController(e,t))||p.then(()=>this.oldValue=this.value):this.oldValue=this.value}unsubscribe(e){m.call(e.topologySet,this),m.call(this.controllerSet,e)}update(t,e){var s=this.value;Object.is(s,t)||(s instanceof Object&&Reflect.has(s,N)&&m.call(s[N],this),t instanceof Object&&Reflect.has(t,N)&&M.call(t[N],this),this.value=t,this.dispatch(e),Object.is(t)&&this.parent&&(Reflect.deleteProperty(this.parent.children,this.name),this.parent=null),E(b(this.children),e=>this.children[e].update((t||F)[e],c.mutation)))}},t=((r="",t=null,m=null,v=null,b=null,f=null,n={"":S},i=((i=w("A","AREA"))=>e=>{var t=e.target;if(i[t.tagName]&&t.hasAttribute("href")){const s=t.getAttribute("href").trim();Object.is(f.mode,"history")?(e.preventDefault(),history.pushState({},"",s),y()):(e=f.prefix,!s||[e,".","/"].some(e=>s.startsWith(e))||Object.is(s,new URL(s,document.baseURI).href)||(t.href=""+e+s))}})(),y=((p=((i=e=>{P(),j.$router=e,t||(d.map(e=>new X(e)),q=[...j.$router[N]][0]),Object.is(t,S)||(t&&t.forEach(e=>e.disabled=!S.has(e)),S.forEach(e=>e.disabled=!1),t=S)})=>e=>{C.childrenCache=x();var t=e.path;S=n[t]||(n[t]=new Set);const s=Object.assign(x(),...v.map(e=>e.modules));return E(Object.keys(s),t=>s[t]instanceof W||(s[t]=m.find(e=>e.resolveModule(t,r)).modules[t])),(C=new W({content:s,type:A.namespace},r)).resolve().then(()=>i(e))})())=>(e=(Object.is(f.mode,"history")?""+location.pathname+location.search:location.hash).replace(f.prefix,""))=>{e.startsWith("/")||(e="/"+e);const{mode:t,aliases:s,prefix:i,redirects:r}=f,[n="",l=""]=e.split("?"),o=s[n]||r[n];if(o)return e=l?o+"?"+l:o,s[n]||history.replaceState({path:e},"",""+i+e),y(e);var e={},a=Object.is(n,"/")?[""]:n.split("/");if(m=[],!b.match(m,e,a))return y(f.default);v=m.slice().reverse(),E(v,e=>e.initialize());const c={},h=Object.assign({},...v.map(e=>e.variables)),d=Object.assign({},...v.map(e=>e.constants)),u=(l&&E([...new URLSearchParams(l)],([e,t])=>c[e]=t),E(Object.keys(h),e=>{if(Reflect.has(c,e)&&!Reflect.has(d,e))try{var t=typeof h[e],s=c[e];h[e]=Object.is(t,"string")?s:window[""+t[0].toUpperCase()+t.substring(1)](JSON.parse(s))}catch(e){}}),{mode:t,prefix:i,path:n,paths:a,query:l,queries:c,scenarios:e,schemes:Object.assign({},h,d)});Promise.all([...k].map(e=>e(u))).then(e=>e.some(e=>e)?history.replaceState(null,"",""+i+j.$router.path):p(u))})(),l=((e={detail:!0},t=new CustomEvent("change",e),s=new CustomEvent("input",e))=>e=>Object.is(e.target.tagName,"FORM")&&E(_(document.body,"input, textarea",!0),e=>{e.dispatchEvent(s),e.dispatchEvent(t)}))(),o=class{constructor({children:e,path:t="",constants:s={},variables:i={},modules:r=null,tailable:n=!1},l=null){this.constants=s,this.variables=i,this.modules=r,this.children=null,this.parent=l,this.scenarios=t instanceof Object?Object.keys(t).map(e=>({scenario:e,regExp:new RegExp(t[e]||"^$")})):[{scenario:t,regExp:new RegExp(`^${t}$`)}],this.initialized=!1,e&&(this.children=e.filter(e=>{try{return!Reflect.has(e,"match")||matchMedia(e.match).matches||R(e.match)}catch(e){return!1}}).map(e=>new o(e,this))),this.tailable=n||!(this.children||[]).length}initialize(){this.initialized||(this.initialized=!0,this.modules&&(this.modules=W.normalizeConfig(this.modules)))}match(t,i,r,s=r.length,n=0){var e=this.scenarios.length;if(e<=s&&this.scenarios.every(({scenario:e,regExp:t},s)=>{s=r[n+s];if(t.test(s))return i[e]=s,!0}))return n+=e,(Object.is(s,n)&&this.tailable||(this.children||[]).find(e=>e.match(t,i,r,s,n)))&&t.push(this)}resolveModule(e,t){var s;if(this.modules)return s=this.modules[e],this.modules[e]=s&&(s instanceof W?s:new W(s,t,e)),this.modules[e]}})=>{j=Object.seal(z({$router:null,$validator:()=>{}}));s=(e,t)=>{const s=e[t];if(s){const i=function(...e){e=s.apply(this,e);return this[N]&&this[N].forEach(e=>e.dispatch()),e};Reflect.defineProperty(i,"name",{configurable:!0,value:t}),Reflect.defineProperty(e,t,{get:()=>i})}};var s,e=(t,e)=>E(e,e=>s(t.prototype,e)),a=(e(Date,["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"])||e(Map,["set","delete","clear"])||e(Set,["add","delete","clear"])||e(WeakMap,["set","delete"])||e(WeakSet,["add","delete"]),JSON.stringify=U(JSON.stringify),E(["concat","copyWithin","fill","find","findIndex","lastIndexOf","pop","push","reverse","shift","unshift","slice","sort","splice","includes","indexOf","join","keys","entries","values","forEach","filter","flat","flatMap","map","every","some","reduce","reduceRight","toLocaleString","toString","at"],e=>Array.prototype[e]=U(Array.prototype[e])),(e={base:document.baseURI,content:{}})=>{var t=e.content;t.routing?(t.routing=Object.assign(O.routing,t.routing),Object.assign(O,t)):O.routing.scenarios={modules:t},f=O.routing,Object.is(f.mode,"history")||f.prefix||(f.prefix="#");const s=x();document.body.addEventListener("click",i,!0),document.body.addEventListener("reset",l),r=e.base,(b=new o(f.scenarios)).initialize(),E(Object.keys(b.modules||{}),e=>s[e]=b.resolveModule(e,r)),(C=Reflect.construct(W,[{content:s,type:A.namespace},r])).resolve().then(()=>S.forEach(e=>e.disabled=!1)||$([new X(new B(document.documentElement)).promise,()=>{E([...new Set(O.rootSelectors.map(e=>[..._(document,e,!0)]).flat())],e=>Reflect.construct(B,[e,[],d,null,!0])),window.addEventListener("popstate",()=>y()),y()}]))});return window.$dagger=Object.freeze(Object.assign(x(),{register:e,runtime:a,version:"1.0.0 - RC"})),a})())=>_(document,'script[type="dagger/configs"]')?document.addEventListener("DOMContentLoaded",()=>$([f(document,document.baseURI),e=>t(e)])):t)();