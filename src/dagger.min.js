export default(({asserter:A,logger:g,warner:C}=((h=(e,s,i)=>{const r=e.startsWith('"')?1:0,n=[],o=[];return E(e.split('"').filter(e=>e),(e,t)=>(t+r)%2?n.push(`%c"${e}"`)&&o.push(i):n.push("%c"+e)&&o.push(s))||[n.join(""),...o]},s=(e,t,s,n,o,i=!1)=>{if(!t){t=", please double check.";if(Array.isArray(e)){const[l,...a]=e,c=a.length;let i=[],r="";E((l+t).split('"%o"'),(e,t)=>{var[e,...s]=h(e,n,o);r+=e,i=[...i,...s],t<c&&(r+='%c"%o"',i=[...i,o,a[t]])}),s(r,...i)}else s(...h(e+t,n,o));if(i)throw new Error("dagger AssertionError occurred!")}})=>({asserter:(e,t)=>s(e,t,console.assert.bind(console,!1),"color: #ff0000","color: #b22222",!0),logger:e=>console.log(...h(e,"color: #337ab7","color: #9442d0")),warner:(e,t)=>s(e,t,console.warn,"color: #ff0000","color: #b22222")}))(),h=Symbol("context"),j=null,O={integrity:!0,rootSelectors:["title","body"],routing:{mode:"history",aliases:{},default:"",prefix:"",redirects:{},scenarios:{}}},r=[],c={bubble:"bubble",self:"self",mutation:"mutation"},d=!1,x=null,u=[],$=null,T=()=>Object.create(null),n=T(),S=new Set,E=(t,s)=>{if(t){var i=t.length||0;for(let e=0;e<i;++e)s(t[e],e)}},N=(...e)=>{const t=T();return E(e,e=>t[e]=!0)||t},f=T(),p=null,w=Symbol("meta"),k=Promise.resolve(),R={json:"json",namespace:"namespace",script:"script",style:"style",string:"string",template:"template"},M=null,L=new Set,P=new WeakMap,J=document.createTextNode(""),v=((r={template:{uri:["#template"],type:R.template,style:"style",optional:!0},script:{uri:['script[type="dagger/script"]'],type:R.script,optional:!0},style:{uri:['style[type="dagger/style"]'],type:R.style,optional:!0}},n=(e,t,s)=>({base:e,content:s?Object.assign({},r,t):t}))=>(e,t)=>{e=z(e,'script[type="dagger/configs"]',!1,!0);if(e){const s=e.getAttribute("src"),i=e.hasAttribute("extends");return e.hasAttribute("base")&&(t=new URL(e.getAttribute("base")||"",t).href),s?X(new URL(s,t),e.integrity).then(({content:e})=>n(t,JSON.parse(e),i)):n(t,e.textContent.trim()?JSON.parse(e.textContent):{},i)}return{base:t,content:r}})(),U=e=>n[e]||(n[e]=new Function(`return ${e};`)()),I=e=>Object.is(typeof e,"string"),y=e=>Reflect.ownKeys(e).filter(e=>!Object.is(e,w)),F=([e,...t],s={stop:!1})=>{if(!s.stop)return e instanceof Promise?e.then(e=>F([e,...t],s)):e instanceof Function?F([e(null,s),...t],s):t.length?F([t.shift()(e,s),...t],s):e},V=JSON.stringify,_=Set.prototype.add,b=Set.prototype.clear,a=Set.prototype.delete,Y=Map.prototype.clear,K=Map.prototype.set,H=WeakMap.prototype.set,D=()=>{r.length&&(E(U(`[${r.map(e=>e.processor).join(", ")}]`),(e,t)=>{t=r[t];n[t.processor]=e,t.processor=e}),r.length=0)},Z=s=>function(...e){var t=j,e=(j=null,s.apply(this,e));return j=t,e},z=(e,t,s=!1,i=!1)=>{e=e[s?"querySelectorAll":"querySelector"](t);return i||A(`Failed to get element matched selector "${t}"`,s?e.length:e),e},X=(s,e="",i=!1)=>fetch(s,O.integrity&&e?{integrity:"sha256-"+e}:{}).then(e=>{if(e.ok){const t=e.headers.get("content-type");return A(`Missing "content-type" for the response content of "${s}"`,t),e.text().then(e=>({content:e,type:t}))}A(`Failed to fetch remote module from "${s}"`,!i)}).catch(()=>{var e=`Failed to fetch remote module from "${s}"`;(i?A:C)(e)}),G=e=>{var t=document.createElement("template");return t.innerHTML=e,t.content},Q=(e,s)=>E(e.children,t=>{Object.is(t.tagName,"TEMPLATE")?(t.getAttribute("$html")&&t.setAttribute("dg_scoped_styles",s.join(",")),Q(t.content,s)):t instanceof HTMLElement&&E(s,e=>t.setAttribute(e,""))}),m=(e,t=!0)=>{if(!I(e)){if(null==e||Number.isNaN(e))return"";if(e instanceof Object)return V(e);e=String(e)}return t?e.trim():e},W=((r=Object.prototype.hasOwnProperty,n=new Set([...Reflect.ownKeys(Symbol).map(e=>Symbol[e]).filter(e=>Object.is(typeof e,"symbol")),h,w]),o=new WeakMap,l=new Set([void 0,Array,Object]),a={get:(e,t)=>{const s=e[t];if(j&&!n.has(t)&&(Object.is(s)||r.call(e,t))){const i=j.topologySet;E([...e[w]].filter(e=>!e.parent||i.has(e)),e=>e.fetch(t,s).subscribe())}return s},set:(e,t,s)=>{var i;return e[t]=s,!n.has(t)&&r.call(e,t)&&(i=e[w],j&&i.forEach(e=>e.unsubscribe(j)),s=W(e,t),i.forEach(e=>e.fetch(t).update(s,c.self))),!0},deleteProperty:(e,t)=>{var s=Reflect.has(e,t);return!!Reflect.deleteProperty(e,t)&&(s&&I(t)&&e[w].forEach(e=>e.fetch(t).update(void 0,c.self)),!0)}})=>(e,t)=>{var s,i=null==t;let r=i?e:e[t];return(r instanceof Object||r&&!r.constructor)&&((s=o.get(r))?r=s:(r[w]=new Set,l.has(r.constructor)&&(s=new Proxy(r,a),H.call(o,r,s),E(y(r),e=>W(r,e)),r=s),H.call(o,r,r))),i?r[w].add(new te(null,"",r)):e[t]=r,r})(),B=((n=new Map,r={json:"dagger/json",namespace:"dagger/configs",script:"dagger/script",style:"dagger/style",string:"dagger/string"},o=T(),i={html:"text/html",json:"application/json",script:["application/javascript","javascript/esm","text/javascript"],style:"text/css"},l=/^[$a-zA-Z_]{1}[\w-$]*$/,a=/^[$a-zA-Z_]{1}[\w-$]*(\.[$a-zA-Z_]{1}[\w-$]*)*$/,c=/(?:^|;|\s+)(?:export|import)\s*?(?:(?:(?:[$\w*\s{},]*)\s*from\s*?)|)(?:(?:"([^"]+)?")|(?:'([^']+)?'))[\s]*?(?:$|)/gm,h=/^(http:\/\/|https:\/\/|\/|\.\/|\.\.\/)/i,d=(e,{config:t,module:s,name:i,type:r})=>{Object.is(r,R.script)?!Reflect.has(t,"anonymous")||t.anonymous?Object.assign(e,s):e[i]=s:Object.is(r,R.namespace)&&t.explicit||Object.is(r,R.json)?t.anonymous?Object.assign(e,s):e[i]=s:Object.is(r,R.string)&&(e[i]=s)},t=((e=N(...Object.keys(R).map(e=>"@"+e)),r=(e,t)=>((e=!Array.isArray(e)&&e instanceof Object?e:{uri:e,candidates:e}).candidates&&!Array.isArray(e.candidates)&&(e.candidates=[e.candidates]),Object.assign(e,(e.candidates||[]).find(e=>{try{return e instanceof Object&&(!Reflect.has(e,"match")||matchMedia(e.match).matches||U(e.match))}catch(e){return!1}})),e.type||(e.type=t),e.uri&&!Array.isArray(e.uri)&&(e.uri=[e.uri]),e))=>i=>E(Object.keys(i),s=>e[s]&&i[s]instanceof Object?E(Object.entries(i[s]),([e,t])=>{A([`The module "${e}" already exists in "%o"`,i],!Reflect.has(i,e)),i[e]=r(t,s.substring(1))})||Reflect.deleteProperty(i,s):i[s]=r(i[s]))||i)(),u=((i=(e,t,s)=>s&&(e.integrity&&(Object.is(e.integrity,s.integrity)||i(e,t,s.parent))&&!t.includes(e.path)||e.dependencies&&(e.dependencies.includes(s)||e.dependencies.some(e=>i(e,t,s))))&&t.push(e.path))=>(e,t)=>{t&&(t.dependencies||(t.dependencies=[]),t.dependencies.push(e),i(e,e=[],t),t=t.path,A(`Failed to resolve template module "${t}" with recursive or circular reference "${[t,...e.reverse(),t].join(" -> ")}"`,!e.length))})(),p=((o=/([\s:+>~])/)=>(t,e,s,i)=>{var r,n;e instanceof CSSKeyframesRule&&(r=e.name,e.name=r+"-"+s,t.insertRule(e.cssText,i.index++),e.name=r),e.cssRules?E(e.cssRules,e=>p(t,e,s,i)):e.selectorText&&((n=(r=e.style).animationName)&&(r.animationName=n+"-"+s),t.insertRule(`${e.selectorText.split(",").map(e=>(e=e.trim())&&`${o.test(e)?e.replace(o,`[${s}]$1`):e+`[${s}]`}, [${s}] `+e).join(", ")}{${r.cssText}}`,i.index++),n)&&(r.animationName=n)})(),m=(i,r)=>{try{E(y(i),e=>{var t=i[e],s=t instanceof Function;r[e]=s?Z(t):t,t instanceof Object&&!s&&m(t,t)})}catch(e){}finally{return r}},f=(e,t,s)=>{var i=document.createElement("style");return e&&(i.textContent=e),document.head.appendChild(i),i.disabled=s,i.setAttribute("name",t),i.setAttribute("router-debug",location.href),i.setAttribute("active-debug",!s),i},b=class{constructor(e={},t="",s="",i=null){A(`The module name should be valid string matched RegExp "${l.toString()}" instead of "${s}"`,!i||l.test(s)),this.name=s,this.state="unresolved",this.childrenCache=T(),this.valid=!0,this.module=this.integrity=this.parent=this.children=this.type=this.content=this.resolvedContent=null,i?(this.parent=i,this.path=i.path?i.path+"."+s:s,this.baseElement=i.baseElement):(this.path=s,this.baseElement=document);var{integrity:s,uri:r,type:n}=e;n&&(A(`The type of module "${this.path}" should be one of "json, namespace, script, style, string, template" instead of "${n}"`,R[n]),this.type=n),Reflect.has(e,"content")?(this.content=e.content,A(`The type of module "${this.path}" should be specified as one of "json, namespace, script, style, string, template" instead of "${n}"`,n)):r?this.URIs=r:A([`Failed to parse the config "%o" for module "${this.path}" as there is no valid "content" or "uri" definition`,e]),O.integrity&&s&&(this.integrity=s),this.config=e,this.promise=new Promise(e=>this.resolver=e),this.base=new URL(e.base||t,(i||{}).base||document.baseURI).href}fetch(t){const s=(t=t.split(".")).shift().trim(),e=this.childrenCache[s]||(this.childrenCache[s]=(this.children||[]).find(e=>Object.is(e.name,s)));return A(`Failed to fetch module "${s}" within namespace "${this.path||"[root]"}"`,!Object.is(e)),e&&e.resolve().then(e=>e.valid&&e.fetchSync(t))}fetchSync(e){if(!e.length)return this;const t=e.shift().trim(),s=this.childrenCache[t]||(this.childrenCache[t]=(this.children||[]).find(e=>Object.is(e.name,t)&&e.valid));return A(`Failed to fetch module "${t}" within namespace "${this.path||"[root]"}"`,!Object.is(s)),u(s,this),s&&s.fetchSync(e)}resolve(){var t,s=this.type;if(Object.is(this.state,"unresolved")){this.state="resolving",g(`The module "${this.path||"[root]"}" is "resolving..."`);let e=null;e=null==this.content?[...this.URIs.map(s=>(A([`The "uri" of module "${this.path}" should be valid "string" instead of "%o"`,s],I(s)),(e,t)=>(t.stop=!!e)||this.resolveURI(s))),e=>{e||(A([`Failed to resolve uri of module "${this.path}" from "%o"`,this.URIs],this.config.optional),this.valid=!1,this.resolved(null))}]:(t=this.content,[...e=[R.namespace,R.json].includes(s)?(A([`The content of module "${this.path}" with type "${s}" should be valid "object" instead of "%o"`,t],t&&Object.is(typeof t,"object")),[Object.is(s,R.namespace)?this.resolveNamespace(t):t]):[this.resolveContent(t)],e=>this.resolveModule(e),e=>this.resolved(e)]),F(e)}else this.valid&&Object.is(this.state,"resolved")&&(Object.is(s,R.style)?this.resolveModule(this.resolvedContent):Object.is(s,R.namespace)&&E(this.children,e=>e.resolve()));return this.promise}resolveContent(e){I(e)||(e=V(e)),this.content=e.trim();var t=this.type;if(Object.is(t,R.namespace))return this.baseElement=G(e),F([v(this.baseElement,this.base),({base:e,content:t})=>this.resolveNamespace(t,e)]);if(Object.is(t,R.script))return import("data:text/javascript, "+encodeURIComponent(e.replace(c,(e,t,s)=>e.replace(t||s,new URL(t||s,this.base))))).catch(()=>A(`Failed to import dynamic script module "${this.path}" with resolved content "${e}"`));if(Object.is(t,R.template)){const s=G(e),i=[],r=this.config.style;return r&&i.push(Promise.all((Array.isArray(r)?r:[r]).map(t=>this.parent.fetch(t).then(e=>(A(`Failed to fetch style module "${t}" within namespace "${this.parent.path}"`,e&&Object.is(e.type,R.style)),e.module&&e.module.getAttribute("name"))))).then(e=>Q(s,e.filter(e=>e)))),i.push(()=>{const e=this.parent.path,t=new q(s,e?e.split("."):[],null,null,!1,{});return Promise.all(t.promises||[]).then(()=>t)}),F(i)}return Object.is(t,R.style)?f(e,"dg_style_module_content-"+this.path.replace(/\./g,"_"),!0):Object.is(t,R.json)?JSON.parse(e):Object.is(t,R.string)?this.content:void A(`Failed to resolve module "${this.path}" of unknown type "${t}"`)}resolved(e){return this.module=e,this.state="resolved",this.resolver(this),g(`The "${this.type}" module "${this.path||"[root]"}" is "resolved".`),this}resolveEmbeddedType(e){if(!this.type){var{tagName:t,type:s}=e,i=Object.is(t,"SCRIPT");if(Object.is(t,"TEMPLATE"))this.type=R.template;else{if(i&&Object.is(s,r.namespace))return this.type=R.namespace,this.resolveNamespace(JSON.parse(e.innerHTML),e.getAttribute("base")||this.base);i&&Object.is(s,r.script)?this.type=R.script:i&&Object.is(s,r.json)?this.type=R.json:Object.is(t,"STYLE")&&Object.is(s,r.style)?this.type=R.style:this.type=R.string}}}resolveModule(e){let t=this.resolvedContent=e;var s=this.type;if(Object.is(s,R.namespace))t=T(),this.children=this.resolvedContent,E(e,e=>d(t,e)),this.parent&&this.parent.resolve().then(e=>Object.setPrototypeOf(t,e.module));else if(Object.is(s,R.script))t=m(t,T());else if(Object.is(s,R.style)){if(!Reflect.has(this.config,"scoped")||this.config.scoped){A(`It's invalid to use "$" in style module path "${this.path}"`,!this.path.includes("$"));const i="dg_style_module-"+this.path.replace(/\./g,"_"),r=f("",i,!0),n=r.sheet,o={index:0};E(t.sheet.cssRules,e=>p(n,e,i,o)),t=r}_.call(S,t)}else Object.is(s,R.template)&&A(`It's invalid to use "$" or "-" in template module path "${this.path}"`,!this.path.includes("$")&&!this.path.includes("-"));return t}resolveNamespace(e,s=this.base){return this.parent&&t(e),this.children=Object.entries(e).map(([e,t])=>this.parent?new b(t,s,e,this):(t.parent=this)&&t),Promise.all(this.children.map(e=>u(e,this)||e.resolve()).filter((e,t)=>{t=this.children[t].config.prefetch;return!t||new RegExp(t).test(Object.is(O.routing.mode,"history")?location.pathname:location.hash)}))}resolveRemoteType(e,t,s){this.base=s,this.type||(s.endsWith(".js")||s.endsWith(".mjs")||i.script.some(e=>t.includes(e))?this.type=R.script:s.endsWith(".css")||t.includes(i.style)?this.type=R.style:s.endsWith(".html")||t.includes(i.html)?(e=e.trim(),this.type=e.startsWith("<html>")||e.startsWith("<!DOCTYPE ")?R.namespace:R.template):s.endsWith(".json")||t.includes(i.json)?this.type=R.json:this.type=R.string)}resolveURI(t){if(t=t.trim()){if(a.test(t))return this.parent.fetch(t).then(e=>(this.resolvedContent=e.resolvedContent,(this.type||(this.type=e.type))&&(!Object.is(this.type,R.namespace)||this.resolveModule(e.resolvedContent))&&this.resolved(e.module)));let e=null;if(h.test(t)){const i=o[this.integrity];if(i)e=[i.resolve(),()=>(this.type=i.type)&&i.resolvedContent];else{O.integrity&&this.integrity&&(o[this.integrity]=this);const r=new URL(t,this.base).href;e=[(e,t)=>F([X(r,this.integrity),e=>e||(t.stop=!0)]),({content:e,type:t})=>this.resolveRemoteType(e,t,r)||this.resolveContent(e)]}}else{var t=z(this.baseElement,t),s=n.get(t);e=s?(C([`The module "${this.path}" and "${s.path}" refer to the same embedded element "%o"`,t]),[s.resolve(),e=>(this.type=e.type)&&e.resolvedContent]):(K.call(n,t,this),[this.resolveEmbeddedType(t)||this.resolveContent(t.innerHTML)])}return e&&F([...e,e=>this.resolveModule(e),e=>this.resolved(e)])}}})=>(f("[dg-cloak] { display: none !important; }","dg-global-style",!1),b.normalizeConfig=t,b))(),ee=((v={checked:e=>Object.is(e.tagName,"OPTION")?e.selected:e.checked,file:e=>(e.multiple?[...e.files]:e.files[0])||null,focus:e=>e.isSameNode(document.activeElement),result:((s=(t,{buffer:e,data:s,encoding:i})=>{let r={file:t,loaded:0,progress:0,state:"initialized",content:null};const n=new FileReader;return n.onloadstart=()=>(r=r&&r[w]&&[...r[w]][0].value||r).state="loading",n.onprogress=({loaded:e})=>(r.loaded=e,r.progress=Math.floor(e/t.size*100)),n.onload=()=>(r.state="loaded",r.content=n.result),n.onerror=()=>r.state="error",n.onabort=()=>r.state="abort",e?n.readAsArrayBuffer(t):s?n.readAsDataURL(t):n.readAsText(t,i||"utf-8"),r})=>(e,t)=>e.multiple?[...e.files].map(e=>s(e,t)):s(e.files[0],t))(),selected:e=>{var{name:t,type:s,tagName:i}=e,i=Object.is(i,"SELECT"),t=(A(['Please specify valid "name" attribute on input node "%o" to support "$selected" directive',e],i||t),[...i?e.selectedOptions:z(document.body,`input[type="${s}"][name="${t}"]:checked`,!0)].map(e=>r(e)));return(i?e.multiple:Object.is(s,"checkbox"))?t:t[0]},value:({type:e,value:t,valueAsNumber:s},{number:i,trim:r},{detail:n})=>n?null:["date","datetime-local"].includes(e)?new Date(s||0):["number","range"].includes(e)?s:i?Number.parseFloat(t):r?t.trim():t},o=["draggable"],c=(e,t,s,{name:i})=>t&&(null==e?t.removeAttribute(i):t.setAttribute(i,m(e))),l=((a=new Event("change"))=>{return{$boolean:(e,t,s,{name:i})=>t.toggleAttribute(i,!!e),checked:(t,s,{parentNode:i},{decorators:r})=>{var{tagName:n,type:e}=s,o=Object.is(n,"OPTION"),l=Object.is(e,"checkbox");if(o||Object.is(n,"INPUT")&&(l||Object.is(e,"radio"))){let e=null;if(o){if(Object.is(t,s.selected))return;s.selected=t;n=i;n&&(!n.multiple&&t&&(e=z(n,"option",!0)),n.$changeEvent||(n.$changeEvent=!0,n.addEventListener("change",e=>E(z(e.target,"option",!0),e=>e.dispatchEvent(a)))))}else l&&r.indeterminate&&(s.indeterminate=null==t),s.indeterminate||(s.checked=t),l||t&&(e=z(document.body,`input[type="radio"][name="${s.name}"]`,!0));e&&k.then(()=>E(e,e=>e.dispatchEvent(a)))}else c(t,s,0,{name:"checked"})},class:(t,e,{profile:{classNames:s}})=>{if(t){const i=new Set(s);Array.isArray(t)?E(t,e=>_.call(i,m(e))):t instanceof Object?E(Object.keys(t),e=>t[e]&&_.call(i,e.trim())):_.call(i,m(t)),e.setAttribute("class",[...i].join(" ").trim())}else s?e.setAttribute("class",s.join(" ")):e.removeAttribute("class")},each:((b=(t,e,s,i,r,n,o,l,a,c,h,d,u)=>{let p=null;var m=r.get(s);if(m){if(p=m.shift(),m.length||v.call(r,s),!Object.is(t,p.index)){var{landmark:f,upperBoundary:m}=p,b=[m];let e=m;for(;!Object.is(e,f);)e=e.nextSibling,b.push(e);E(b.reverse(),e=>u.insertBefore(e,(t?i[t-1].landmark||{}:h.upperBoundary).nextSibling)),i.includes(p)&&i.splice(p.index,1),p.index=t,i[t]=p}p.scope[l]=e,p.scope[o]=t}else p=new g(d,h,t,{[o]:t,[l]:e,[a]:s},c);r=n.get(s);r?r.push(p):K.call(n,s,[p])},v=Map.prototype.delete)=>(e,t,i,{decorators:s})=>{e=e||{};const r=new Set(e.values instanceof Function?e.values():Object.values(e)),n=[...e.entries instanceof Function?e.entries():Object.entries(e)],{children:o,childrenMap:l,profile:a,parentNode:c}=i,h=e[w];if(h&&E(n,([t,s])=>s&&s[w]&&h.forEach(e=>e.fetch(t,s))),!n.length)return Y.call(l)||i.removeChildren(!0);l.forEach((e,t)=>r.has(t)||E(e,e=>e.destructor(!0))||v.call(l,t));const d=new Map;let{item:u="item",key:p="key",index:m="index",plain:f}=s;Object.is(u,!0)&&(u="item"),Object.is(p,!0)&&(p="key"),Object.is(m,!0)&&(m="index"),C(['duplication found in slice scope schemes "%o"',{item:u,key:p,index:m}],!Object.is(p,m)&&!Object.is(p,u)&&!Object.is(u,m)),E(n,([e,t],s)=>b(s,e,t,o,l,d,m,p,u,f,i,a,c)),o.length=n.length,l.forEach(e=>E(e,e=>(e.parent=null,e.destructor(!0)))),i.childrenMap=d})(),exist:(e,t,s)=>e?Object.is(s.state,"unloaded")&&s.loading():s.unloading(!0),file:(e,t)=>A([`The data bound to directive "$file" of element "%o" should be "File${t.multiple?" array":""}" instead of "%o"`,t,e],!e||(t.multiple?Array.isArray(e)&&Array.every(e=>e instanceof File):e instanceof File)),focus:(e,t,s,{decorators:{prevent:i=!1}})=>e?t.focus({preventScroll:i}):t.blur(),html:(e,t,s,{decorators:{root:i=!1}})=>{if(e=m(e),s.removeChildren(!0),e){const r=[],n=s.profile,o=G(e);t||(e=n.node.getAttribute("dg_scoped_styles"))&&Q(o,e.split(",")),Reflect.construct(q,[o,i?[]:n.paths,r,null,!0]),r.length&&(D(),Promise.all(r.map(e=>Promise.all(e.promises||[]))).then(()=>E(r,(e,t)=>s.profile&&Reflect.construct(g,[e,i?null:s,t,null,!1,(e.landmark||e.node).parentNode])))),t?t.appendChild(o):s.parentNode.insertBefore(o,s.landmark)}},result:(e,t)=>A([`The data bound to directive "$result" of element "%o" should be "object${t.multiple?" array":""}" instead of "%o"`,t,e],!e||(t.multiple?Array.isArray(e)&&Array.every(e=>e instanceof Object):e instanceof Object)),selected:(l=(e,t,s)=>{const i=r(e);return s?(t||[]).some(e=>Object.is(e,i)):Object.is(t,i)},(t,e)=>{var{type:s,tagName:i}=e,r=Object.is(i,"SELECT");if(r||Object.is(i,"INPUT")&&(Object.is(s,"checkbox")||Object.is(s,"radio"))){const n=r?e.multiple:Object.is(s,"checkbox");n&&A(['The data bound to directive "$selected" of element "%o" should be "array" instead of "%o"',e,t],null==t||Array.isArray(t)),r?k.then(()=>E(z(e,"option",!0),e=>e.selected=l(e,t,n))):e.checked=l(e,t,n)}else c(t,e,0,{name:"selected"})}),style:(o=(e,t)=>{var s,i;t&&([s,i=""]=t.split(":").map(e=>e.trim()),A(`The content "${t}" is not a valid style declaration`,s&&i),e[s]=i)},(t,e,{profile:{inlineStyle:s,styles:i}})=>{if(t){const r=Object.assign({},i);Array.isArray(t)?E(t,e=>o(r,m(e))):t instanceof Object?E(Object.keys(t),e=>r[e.trim()]=m(t[e])):E(m(t).split(";"),e=>o(r,e.trim())),e.style.cssText=Object.keys(r).filter(e=>r[e]).map(e=>`${e}: ${r[e]}; `).join("").trim()}else s?e.setAttribute("style",s):e.removeAttribute("style")}),text:(e,t)=>{e=m(e),Object.is(e,t.textContent)||(t.textContent=e)},value:(n=(e,t=2)=>String(e).padStart(t,"0"),(t,s,e,{decorators:{trim:i=!1}})=>{e.value=t;var{tagName:e,type:r}=s,e=Object.is(e,"INPUT");if(A([`It's illegal to use directive "$value" on element "%o"`,s],!(e&&Object.is(r,"file"))),e){e=["date","datetime-local"].includes(r);if(t instanceof Date)if(e||Object.is(r,"week"))s.valueAsNumber=t;else if(Object.is(r,"month"))s.value=t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1);else if(Object.is(r,"time")){r=s.step||0;let e=n(t.getUTCHours())+":"+n(t.getUTCMinutes());r%60&&(e=e+":"+n(t.getUTCSeconds()),r%1)&&(e=e+"."+n(t.getUTCMilliseconds(),3)),s.value=e}else s.value=t;else t=m(t,i),e?s.valueAsNumber=new Date(t):s.value=t}else s.value=m(t,i)})};var n,o,l})(),y=(()=>(n,e,t)=>!e||(e=Array.isArray(e)?e:[e])[t](e=>{{var t=n,s=!(e=String(e)).startsWith("!");s||(e=e.substring(1));const i=new RegExp(e),r=t.getModifierState&&t.getModifierState(e)||[t.code,t.key,t.button].some(e=>i.test(e));return s==r}}))(),s=(s,t,i)=>t&&E(t.filter((e,t)=>e&&(e.index=t,e.decorators)&&s.includes(e.decorators.name)).reverse(),e=>i(e)||t.splice(e.index,1)),r=e=>(e&&Reflect.has(e[h]||{},"value")?e[h]:e).value,g=class{constructor(i,e=null,s=0,t=null,r=!1,n=null){this.directives=i.directives,this.profile=i,this.index=s,this.state="loaded",this.promise=this.resolver=this.parent=this.children=this.childrenMap=this.existController=this.landmark=this.upperBoundary=this.childrenController=this.controller=this.controllers=this.eventHandlers=this.scope=this.sentry=this.node=null,e?(this.parent=e,this.parentNode=n||e.node||e.parentNode,n=i.paths,this.module=(Object.is(n,e.profile.paths)?e:x.fetchSync([...n])).module,this.scope=e.scope,e.children.splice(s,0,this)):(this.parentNode=i.node.parentNode||i.landmark.parentNode,this.module=x.module,this.scope=(p||{}).scope||$);var n=i.dynamic;n&&(n=n.processor(this.module,this.scope,this.parentNode),h=this.directives,this.directives=Object.assign({},h,{controllers:[...h.controllers||[]],eventHandlers:[...h.eventHandlers||[]]}),E(Array.isArray(n)?n:[n],e=>{var t,s;I(e)&&(e={name:(s=(t=e.indexOf("="))<0)?e:e.substring(0,t),value:s?"":e.substring(t+1)}),i.resolveDirective(e.name,e.value||"",this.directives)}),D());const{plain:o,text:l,html:a,raw:c}=i;if(a)return(p=this).loading();if(c||o)this.resolveNode(),this.node.removeAttribute&&this.node.removeAttribute("dg-cloak"),o&&this.resolveChildren();else if(l)this.resolveNode(()=>this.controller=this.resolveController(l));else{var{each:h,exist:n}=this.directives||{};if((h||n||i.virtual)&&this.resolveLandmark(t),t)this.sliceScope=this.resolveScope(t,r,h.decorators.root),e.children.length>s+1&&E(e.children,(e,t)=>e&&s<t&&e.index++);else if(i.slotScope&&(this.slotScope=this.resolveScope(Object.assign({},i.slotScope),!0)),h)return this.children=[],this.childrenMap=new Map,this.controller=this.resolveController(h),this;n?(this.state="unloaded",this.existController=this.resolveController(n)):this.loading()}}destructor(e){this.unloading(e);var{plain:t,text:s}=this.profile;t||s||(e&&(this.landmark&&this.landmark.remove(),this.upperBoundary)&&this.upperBoundary.remove(),this.existController&&this.removeController(this.existController),t=(this.parent||{}).children,e&&t&&(E(t,(e,t)=>t>this.index&&e.index--),t.splice(this.index,1))),E(Reflect.ownKeys(this),e=>{this[e]=null})}initialize(e,t){e&&(s=e.constructor,Object.is(s,Object)||!s&&Object.is(typeof e,"object"))&&this.resolveScope(e,!1,t);var{html:s,virtual:e}=this.profile;s?this.node=s:e||this.resolveNode(),this.loaded(),s||this.resolveChildren()}loading(){this.state="loading";const t=(this.directives||{}).loading;t?this.resolvePromise(t.processor(this.module,this.scope,null),e=>Object.is(this.state,"loading")&&this.initialize(e,t.decorators.root)):this.initialize()}loaded(){var e=(this.directives||{}).loaded;this.resolvePromise(e&&e.processor(this.module,this.scope,this.node),()=>Object.is(this.state,"loading")&&this.postLoaded())}postLoaded(){var e,t,s;this.resolver&&(this.resolver(),this.resolver=null),this.state="loaded",this.node&&this.node.removeAttribute("dg-cloak"),this.directives&&({controllers:e,eventHandlers:t,sentry:s}=this.directives,s&&(this.sentry=Object.assign({},s,{owner:this,processor:s.processor.bind(null,this.module,this.scope)}),_.call(L,this.sentry)),t&&(this.eventHandlers=t.map(({event:e,decorators:t={},processor:s,name:i,options:r})=>{var n=t.target||this.node,o=e=>this.updateEventHandler(e,i,s.bind(null,this.module,this.scope),t);return A([`The target of "+${e}" directive defined on element "%o" is invalid`,this.node||this.profile.node],n),n.addEventListener(e,o,r),{target:n,event:e,handler:o,options:r,decorators:t}})),e)&&(this.controllers=e.map(e=>this.resolveController(e)).filter(e=>e))}removeChildren(e){if(e)if(this.node)this.node.innerHTML="";else if(this.upperBoundary){let e=this.upperBoundary.nextSibling;for(;e&&!Object.is(e,this.landmark);){var t=e.nextSibling;e.remove(),e=t}}(this.children||[]).length&&(E(this.children,e=>e&&e.destructor(!1)),this.children.length=0)}removeController(t){t.topologySet.forEach(e=>e.unsubscribe(t)),b.call(t.topologySet),t.observer&&t.observer.disconnect(),Object.is(t,this.childrenController)&&(this.childrenController=null),Object.is(t,this.existController)&&(this.existController=null)}removeDirectives(e,t){e&&(Array.isArray(t)||(t=[t]),s(t,[...this.controllers,this.childrenController,this.existController],e=>this.removeController(e)),s(t,this.eventHandlers,({target:e,event:t,handler:s,options:i})=>e.removeEventListener(t,s,i)))}resolveChildren(){var e=this.profile.children,t=(this.directives||{}).child;!this.children&&(e||t&&Object.is(t.name,"html"))&&(this.children=[]),t?this.childrenController=this.resolveController(t):E(e,(e,t)=>new g(e,this,t))}resolveController({name:e,decorators:t=f,processor:s}){const i=this.node,r=!t.once||t.lazy,n={name:e,owner:this,decorators:t,processor:s.bind(null,this.module,this.scope),topologySet:r?new Set:null,observer:null,updater:e&&(l[e]||i&&!o.includes(e)&&Object.is(typeof i[e],"boolean")&&l.$boolean||c)};return r&&i&&Object.is(e,"selected")&&Object.is(i.tagName,"SELECT")&&(n.observer=new MutationObserver(()=>this.updateController(n,!0))).observe(i,{childList:!0}),this.updateController(n,!0),r&&n}resolveLandmark(t){var{index:s,parent:i,parentNode:r,profile:{landmark:n,virtual:e}}=this;if(i){let e=null;s=i.children[s+1];e=s?s.upperBoundary||s.node||s.landmark:t?i.landmark:r.contains(n||null)?n:i.node?null:i.landmark,this.landmark=r.insertBefore(J.cloneNode(!1),e)}else this.landmark=n;(e||(this.directives||{}).each)&&(this.upperBoundary=r.insertBefore(J.cloneNode(!1),this.landmark))}resolveNode(e){var{node:t,unique:s,raw:i}=this.profile,s=s?t:t.cloneNode(i);(this.node=s)[h]=this,e&&e(),s.isConnected||(t=this.landmark||this.parent&&(this.parent.node?null:this.parent.landmark),this.parentNode.insertBefore(s,t&&Object.is(this.parentNode,t.parentNode)?t:null))}resolvePromise(e,t){e instanceof Promise?(t&&(e=e.then(t)),this.resolver||(this.promise=new Promise(e=>this.resolver=e))):t&&t(e)}resolveScope(e,t,s){return t||(e=W(e)),this.scope=Object.setPrototypeOf(e,s?$:this.scope),e}unloading(e){if(!Object.is(this.state,"unloaded")){if(!this.controller||this.removeController(this.controller)||(this.controller=null),!this.profile.text){if(this.state="unloading",this.profile.plain||this.childrenMap)return this.removeChildren(e);this.childrenController&&this.removeController(this.childrenController),E(this.controllers,e=>this.removeController(e))||(this.controllers=null),E(this.eventHandlers,({target:e,event:t,handler:s,options:i})=>e.removeEventListener(t,s,i))||(this.eventHandlers=null),this.sentry&&(a.call(L,this.sentry),this.sentry=null);var t=(this.directives||{}).unloading,t=(t&&t.processor(this.module,this.scope,this.node),this.node),t=(e&&t&&t.remove(),this.node=null,this.removeChildren(e),this.scope=this.sliceScope||(this.parent||p).scope,(this.directives||{}).unloaded);t&&t.processor(this.module,this.scope,null)}this.state="unloaded"}}updateEventHandler(e,t,s,i){if(!t){var{current:r,inside:n,every:o,some:l,prevent:a,stop:c,stopImmediate:h}=i,{type:d,target:u,currentTarget:p}=e,m=Object.is(u,p);if(C([`Please avoid using "current" and "inside" decorators together on "+${d}" directive on element "%o".`,p],!(r&&n)),!((!r&&!n||r&&m||n&&p.contains(u)&&!m)&&y(e,o,"every")&&y(e,l,"some")))return;a&&e.preventDefault(),c&&e.stopPropagation(),h&&e.stopImmediatePropagation()}const f=j,b=i.remove;j=null;d=s(this.node,t?v[t](this.node,i,e):e);b&&(d instanceof Promise?d.then(e=>this.removeDirectives(e,b)):this.removeDirectives(d,b)),j=f}})=>{var i,n;return g.prototype.updateController=(i=new Set,n=(t,s,e)=>{if(t.profile){const{decorators:{once:r,remove:n,router:o,lazy:l},topologySet:a,updater:c,name:h}=s,d=!r||l;var i;(e||a&&[...a].some(e=>!Object.is(e.oldValue,e.value)))&&(a&&a.size&&(a.forEach(e=>e.unsubscribe(s)),b.call(a)),e=j,j=d?s:null,i=s.processor(t.node),d&&o&&M.subscribe(),j=e,l&&!h?(s.processor=i,s.decorators.lazy=!1):i instanceof Promise?i.then(e=>(n&&t.removeDirectives(e,n),c&&c(e,t.node,t,s))):(n&&t.removeDirectives(i,n),c&&c(i,t.node,t,s)))}},function(e,t){i.has(e)||(_.call(i,e),k.then(()=>{a.call(i,e),n(this,e,t)}))}),g})(),q=((m={$:"controller","+":"event"},f=N("checked","file","focus","result","selected","value"),b=N("loading","loaded","sentry","unloading","unloaded"),O=N("STYLE","SCRIPT"),v=(e,t,s,i)=>e.eventHandlers.push(S(`Object.is(${t}, _$data_) || (${t} = _$data_)`,Object.assign({event:i},s),"$node, _$data_")),y=e=>{{var[s=t=>{try{return t&&(window[t]||U(t))}catch(e){return t}}]=[];const[t,...i]=((e=e).includes("-")?e.trim().replace(/-[a-z]/g,e=>e[1].toUpperCase()).replace(/-[A-Z]/g,e=>"-"+e[1].toLowerCase()):e).split("#"),r=T();return E(i.filter(e=>e),e=>{var[e,t]=e.split(":").map(e=>decodeURIComponent(e));r[e]=!t||s(t)}),{name:t,decorators:r}}},$=(e,t,s="")=>{e.removeAttribute(t),e.setAttribute(`${m[t[0]]||"meta"}-${decodeURIComponent(t.substr(1)).trim().replace(/[^\w]/g,"-")}-debug`,s)},S=((i="$module, $scope")=>(e,t,s="$node")=>{e=`${s?`(${i}, ${s})`:`(${i})`} => { with ($module) with ($scope) return (() => { 'use strict'; return ${e}; })(); }`;s=n[e],t=Object.assign({},t,{processor:s||e});return s||r.push(t),t})(),w=(e,t)=>{A(`There is no valid module named "${e}" found`,t);let s=!1,i=t.promise;if(t){if(!(i=t.fetch(e)))return w(e,t.parent);s=!0}return{promise:i,isVirtualElement:s}},a=class{constructor(e,t=[],s=null,i=null,r=!1,n=null){this.node=e,this.unique=r,this.paths=t,this.defaultSlotScope=n||(i||{}).defaultSlotScope||null,this.dynamic=this.plain=this.raw=this.virtual=!1,this.text=this.inlineStyle=this.styles=this.directives=this.landmark=this.children=this.classNames=this.html=this.slotScope=null;r=e.nodeType;if(Object.is(r,Node.TEXT_NODE)){var t=e.textContent.trim();t&&(t.includes("${")&&t.includes("}")?(s&&s.push(this),this.text=S(`\`${t}\``,{name:"text"},""),this.promises=[],this.node=this.resolveLandmark(e,"string template replaced")):this.raw=!0,i.children.push(this))}else if(Object.is(r,Node.ELEMENT_NODE)){this.promises=[];const o="dg-cloak",{attributes:l,tagName:a}=e,c=l["@raw"];if(this.html=e.isSameNode(document.documentElement)&&e,this.raw=!(!c&&!O[a]),this.raw)c&&$(e,"@raw"),s&&e.removeAttribute(o);else{const h=[],d=[],u={controllers:h,eventHandlers:d},p=a.toLowerCase(),m=x.fetchSync([...this.paths]),{promise:f=null,isVirtualElement:b=!1}=e instanceof HTMLUnknownElement&&w(p,m)||{},v="@directive",y=l[v],g=Object.is(p,"template"),j="@slot";if(e.hasAttribute(j)&&(t="_$slot_"+(n=e.getAttribute(j).trim()),$(e,j,n),this.defaultSlotScope)&&(this.defaultSlotScope[t]=e.innerHTML,C([`Please avoid adding "$html" or "$text" directive on element "%o" as it's defined "@slot" meta directive already`,e],!e.hasAttribute("$html")&&!e.hasAttribute("$text")),e.removeAttribute("$html"),e.removeAttribute("$text"),this.resolveDirective("$html",t,u)),(b||g)&&(this.virtual=!0,this.resolveLandmark(e,"virtual node removed")),E([...l],({name:e,value:t})=>this.resolveDirective(e,t,u)),y?(this.directives=u,this.dynamic=S(y.value),e.removeAttribute(v)):(h.length||(u.controllers=null),d.length||(u.eventHandlers=null),(u.controllers||u.eventHandlers||2<Object.values(u).length)&&(this.directives=u)),this.html)return D();this.plain=!(this.directives||this.landmark),s&&(this.plain?e.hasAttribute(o)&&E(e.children,e=>e.setAttribute(o,""))||e.removeAttribute(o):s.push(this)&&(s=null)),b?(A(`It is illegal to use "$html" or "$text" directive on template module "${p}"`,!u.child),this.promises.push(f.then(e=>this.resolveTemplate(e)))):u.child||this.resolveChildren(e,s)}i&&(i.children.push(this),this.promises.length)&&i.promises.push(Promise.all(this.promises))}else Object.is(r,Node.DOCUMENT_FRAGMENT_NODE)?(this.promises=[],this.resolveChildren(e,s)):Object.is(r,Node.COMMENT_NODE)?this.raw=!0:A(`The node type "${r}" is not supported`)}resolveChildren(e,t){e=(this.virtual?e.content:e).childNodes;return e.length?(this.children=[],E(e,e=>Reflect.construct(a,[e,this.paths,t,this,!!this.unique])),this.plain&&this.children.every(e=>e.raw)&&(this.raw=!0,this.plain=!1)):this.plain&&(this.raw=!0,this.plain=!1),this.raw&&(this.children=null),this}resolveDirective(e,t,s){var i=m[e[0]];if(i){var r=this.node,n=($(r,e,t),r.removeAttribute(e),{}),{name:e,decorators:o}=y(e.substring(1));if(n.decorators=o,Object.is(i,"event"))n.event=e,b[e]?s[e]=S(t,n,Object.is(e,"sentry")?"$nextRouter":"$node"):(n.options=o,s.eventHandlers.push(S(t,n,"$node, $event")));else{i=Object.is(e,"watch"),i=(i||(n.name=e),i&&o.lazy&&(t=`${t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).trim()||"null"}, $node => `+t),S(t,n));if(Object.is(e,"each"))A(['It is illegal to use "$each" directive with "id" attribute together on node "%o"',r],!r.hasAttribute("id")),s.each=i,this.resolveLandmark(r,'"$each" node replaced'),this.unique=!1;else if(Object.is(e,"exist"))s.exist=i,this.resolveLandmark(r,'"$exist" node replaced'),this.unique=!1;else if(Object.is(e,"html")||Object.is(e,"text"))C(['Please avoid adding "$html" and "$text" directives together on element "%o"',r],!s.child),s.child=i;else{if(Object.is(e,"class"))this.classNames||r.classList.length&&(this.classNames=[...r.classList].map(e=>e.trim()));else if(Object.is(e,"style")){if(!this.styles){const u=r.style,p=[...u];p.length&&(this.inlineStyle=r.getAttribute("style"),this.styles=T(),E(p,e=>{var t=u[e],s=u.getPropertyPriority(e);this.styles[e]=s?t+" !"+s:t}))}}else if(f[e]){var l,a,c,h,d=Object.is(e,"value");if(o.oneway||(n.options=!0,{tagName:r,type:h}=r,l=Object.is(e,"checked"),a=Object.is(e,"selected"),c=Object.is(h,"checkbox")||Object.is(h,"radio"),h=Object.is(h,"file"),Object.is(e,"focus")?(v(s,t,n,"blur"),v(s,t,n,"focus")):(Object.is(r,"INPUT")&&(h&&(Object.is(e,"file")||Object.is(e,"result"))||c&&(l||a)||!c&&!h&&d)||Object.is(r,"OPTION")&&l||Object.is(r,"SELECT")&&a||Object.is(r,"TEXTAREA")&&d)&&v(s,t,n,o.input?"input":"change")),d)return s.controllers.unshift(i)}s.controllers.push(i)}}}}resolveLandmark(e,t){if(!this.landmark)return this.landmark=J.cloneNode(!1),this.promises.push(k.then(()=>e.replaceWith(this.landmark)||t)),this.landmark}resolveTemplate(e){var t,s,i=e.module;let r=P.get(i);if(r||(r=T(),s=(t=i instanceof a)?i:((e.children||[]).find(e=>Object.is(e.name,"template"))||{}).module,A(`"${e.path}" or "${e.path}.template" is not a valid template module`,s instanceof a),r.children=s.children,r.defaultSlotScope=s.defaultSlotScope,H.call(P,i,r),t)||H.call(P,s,r),Object.assign(this,r),Object.keys(this.defaultSlotScope).length){const n={},o="_$slot_",l="@slot";E(this.node.children,e=>{var t,s;e.hasAttribute(l)&&(t=e.getAttribute(l).trim(),s=o+t,$(e,l,t),n[s]=Object.is(e.tagName,"TEMPLATE")?e.innerHTML:e.outerHTML)}),Reflect.has(this.defaultSlotScope,o)&&!Reflect.has(n,o)&&(n[o]=this.node.innerHTML),this.slotScope=Object.assign({},this.defaultSlotScope,n)}return""}})=>a)(),te=class{constructor(e,t,s){this.value=this.oldValue=s,this.parent=null,this.controllerSet=new Set,this.children=T(),this.name=t,e&&((e.children[t]=this).parent=e)}dispatch(e=c.bubble){A(`It's illegal to modify fields of "$router"`,d||!Object.is(M,this.parent)),Object.is(e,c.mutation)||this.parent&&this.parent.parent&&this.parent.dispatch(c.bubble);const t=Object.is(e,c.bubble);this.value&&this.value[w]?this.value[w].forEach(e=>e.trigger(t)):this.trigger(t)}fetch(e,t){e=this.children[e]||new te(this,e,t);return t&&t[w]&&_.call(t[w],e),e}subscribe(){var e;return j&&(_.call(j.topologySet,this),_.call(this.controllerSet,j),e=this.parent)&&e.parent&&e.unsubscribe(j),this}trigger(t){this.controllerSet.size?this.controllerSet.forEach(e=>e.owner.updateController(e,t))||k.then(()=>this.oldValue=this.value):this.oldValue=this.value}unsubscribe(e){a.call(e.topologySet,this),a.call(this.controllerSet,e)}update(t,e){var s=this.value;Object.is(s,t)||(s instanceof Object&&Reflect.has(s,w)&&a.call(s[w],this),t instanceof Object&&Reflect.has(t,w)&&_.call(t[w],this),this.value=t,this.dispatch(e),Object.is(t)&&this.parent&&(Reflect.deleteProperty(this.parent.children,this.name),this.parent=null),E(y(this.children),e=>this.children[e].update((t||f)[e],c.mutation)))}},t=((r="",t=null,m=null,f=null,b=null,v=null,n={"":S},i=((i=N("A","AREA"))=>e=>{var t=e.target;if(i[t.tagName]&&t.hasAttribute("href")){const s=t.getAttribute("href").trim();Object.is(v.mode,"history")?(e.preventDefault(),history.pushState({},"",s),y()):(e=v.prefix,!s||[e,".","/"].some(e=>s.startsWith(e))||Object.is(s,new URL(s,document.baseURI).href)||(t.href=""+e+s))}})(),y=((p=((i=e=>{g(`router has changed from "${($.$router||{}).path||"[root]"}" to "${e.path}"`),D(),d=!0,$.$router=e,d=!1,t||(u.map(e=>new ee(e)),M=[...$.$router[w]][0]),Object.is(t,S)||(t&&t.forEach(e=>(e.disabled=!S.has(e),e.setAttribute("active-debug",!e.disabled))),S.forEach(e=>(e.disabled=!1,e.setAttribute("active-debug",!0))),t=S)})=>e=>{g(`router is changing from "${($.$router||{}).path||"[root]"}" to "${e.path}"...`),x.childrenCache=T();var t=e.path;S=n[t]||(n[t]=new Set);const s=Object.assign(T(),...f.map(e=>e.modules));return E(Object.keys(s),t=>s[t]instanceof B||(s[t]=m.find(e=>e.resolveModule(t,r)).modules[t])),(x=new B({content:s,type:R.namespace},r)).resolve().then(()=>i(e))})())=>(e=(Object.is(v.mode,"history")?""+location.pathname+location.search:location.hash).replace(v.prefix,""))=>{e.startsWith("/")||(e="/"+e);const{mode:t,aliases:s,prefix:i,redirects:r}=v,[n="",o=""]=e.split("?"),l=s[n]||r[n];if(l)return g(`router redirected from "${n}" to "${l}"`),e=o?l+"?"+o:l,s[n]||history.replaceState({path:e},"",""+i+e),y(e);var e={},a=Object.is(n,"/")?[""]:n.split("/");if(m=[],!b.match(m,e,a)){if(Reflect.has(v,"default"))return C(`The router "${n}" is invalid, redirect to the default router "${v.default}"`),y(v.default);A(`The router "${n}" is invalid`)}f=m.slice().reverse(),E(f,e=>e.initialize());const c={},h=Object.assign({},...f.map(e=>e.variables)),d=Object.assign({},...f.map(e=>e.constants)),u=(o&&E([...new URLSearchParams(o)],([e,t])=>c[e]=t),E(Object.keys(h),e=>{if(Reflect.has(c,e)&&!Reflect.has(d,e))try{const type=typeof h[e],o=c[e];h[e]=Object.is(type,"string")?o:window[""+type[0].toUpperCase()+type.substring(1)](JSON.parse(o))}catch(e){A(`The expected variable type is "${type}" but the real queryString content is "${o}"`)}}),{mode:t,prefix:i,path:n,paths:a,query:o,queries:c,scenarios:e,schemes:Object.assign({},h,d)});Promise.all([...L].map(e=>e.processor(u)&&(C(['The router redirect is prevented by "%o"',e.owner.node||e.owner.profile.node])||!0))).then(e=>e.some(e=>e)?history.replaceState(null,"",""+i+$.$router.path):p(u))})(),o=((e={detail:!0},t=new CustomEvent("change",e),s=new CustomEvent("input",e))=>e=>Object.is(e.target.tagName,"FORM")&&E(z(document.body,"input, textarea",!0,!0),e=>{e.dispatchEvent(s),e.dispatchEvent(t)}))(),l=class{constructor({children:e,path:t="",constants:s={},variables:i={},modules:r=null,tailable:n=!1},o=null){this.constants=s,this.variables=i,this.modules=r,this.children=null,this.parent=o,this.scenarios=t instanceof Object?Object.keys(t).map(e=>({scenario:e,regExp:new RegExp(t[e]||"^$")})):[{scenario:t,regExp:new RegExp(`^${t}$`)}],this.initialized=!1,e&&(A([`The router's children should be "array" instead of "%o"`,e],Array.isArray(e)),this.children=e.filter(e=>{try{return!Reflect.has(e,"match")||matchMedia(e.match).matches||U(e.match)}catch(e){return!1}}).map(e=>new l(e,this))),this.tailable=n||!(this.children||[]).length}initialize(){this.initialized||(this.initialized=!0,this.modules&&(this.modules=B.normalizeConfig(this.modules)))}match(t,i,r,s=r.length,n=0){var e=this.scenarios.length;if(e<=s&&this.scenarios.every(({scenario:e,regExp:t},s)=>{s=r[n+s];if(t.test(s))return i[e]=s,!0}))return n+=e,(Object.is(s,n)&&this.tailable||(this.children||[]).find(e=>e.match(t,i,r,s,n)))&&t.push(this)}resolveModule(e,t){var s;if(this.modules)return s=this.modules[e],this.modules[e]=s&&(s instanceof B?s:new B(s,t,e)),this.modules[e]}})=>{$=Object.seal(W({$router:null,$validator:(t,s,{type:e,assert:i,required:r}={})=>{null!=t&&!Number.isNaN(t)||A([`The data "${s}" should be assigned a valid value instead of "%o" before using`,t],!r),e&&(Array.isArray(e)?A([`The type of data "${s}" should be one of "%o" instead of "%o"`,e,(t.constructor||{}).name],e.some(e=>t instanceof e)):A([`The type of data "${s}" should be "%o" instead of "%o"`,e,(t.constructor||{}).name],t instanceof e)),i&&(i instanceof Function?A(`The assert of "${s}" is falsy`,i(t)):Array.isArray(i)?E(i,e=>{A(`The type of assert should be "function" instead of "${typeof e}"`,e instanceof Function),A(`The assert of "${s}" is falsy`,e(t))}):A(`The type of assert should be "function" or "function array" instead of "${typeof i}"`))}}));s=(e,t)=>{function s(...e){return e=i.apply(this,e),this[w]&&this[w].forEach(e=>e.dispatch()),e}const i=(e||{})[t];A([`"${t}" is not a valid method name of prototype object "%o"`,e],i&&i instanceof Function);Reflect.defineProperty(s,"name",{configurable:!0,value:t}),Reflect.defineProperty(e,t,{get:()=>s})};var s,e=(t,e)=>{A(['The 1st argument of "$dagger.register" should be valid "object" instead of "%o"',t],t instanceof Object),A(['The 2nd argument of "$dagger.register" should be "string array" instead of "%o"',e],Array.isArray(e)&&e.every(e=>I(e))),E(e,e=>s(t.prototype,e))},a=(e(Date,["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"])||e(Map,["set","delete","clear"])||e(Set,["add","delete","clear"])||e(WeakMap,["set","delete"])||e(WeakSet,["add","delete"]),JSON.stringify=Z(JSON.stringify),E(["concat","copyWithin","fill","find","findIndex","lastIndexOf","pop","push","reverse","shift","unshift","slice","sort","splice","includes","indexOf","join","keys","entries","values","forEach","filter","flat","flatMap","map","every","some","reduce","reduceRight","toLocaleString","toString","at"],e=>Array.prototype[e]=Z(Array.prototype[e])),(e={base:document.baseURI,content:{}})=>{g(`Powered by "dagger V${$dagger.version}".`);var t=e.content;t.routing?(t.routing=Object.assign(O.routing,t.routing),Object.assign(O,t)):O.routing.scenarios={modules:t},v=O.routing,Object.is(v.mode,"history")||v.prefix||(v.prefix="#");const s=T();document.body.addEventListener("click",i,!0),document.body.addEventListener("reset",o),r=e.base,(b=new l(v.scenarios)).initialize(),E(Object.keys(b.modules||{}),e=>s[e]=b.resolveModule(e,r)),(x=Reflect.construct(B,[{content:s,type:R.namespace},r])).resolve().then(()=>S.forEach(e=>e.disabled=!1)||F([new ee(new q(document.documentElement)).promise,()=>{var e=O.rootSelectors,e=(A(['The "rootSelectors" should be "string array" instead of "%o"',e],Array.isArray(e)&&e.every(e=>I(e))),[...new Set(e.map(e=>[...z(document,e,!0)]).flat())]);A(['It\'s illegal to set "%o" as root node',document.documentElement],!e.includes(document.documentElement)),E(e,e=>Reflect.construct(q,[e,[],u,null,!0])),C(['No node with valid directive was detected under root elements "%o"',e],u.length),window.addEventListener("popstate",()=>y()),y()}]))});return window.$dagger=Object.freeze(Object.assign(T(),{register:e,runtime:a,version:"1.0.0 - RC"})),a})())=>z(document,'script[type="dagger/configs"]')?document.addEventListener("DOMContentLoaded",()=>F([v(document,document.baseURI),e=>t(e)])):t)();